/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={669:(t,e,s)=>{t.exports=s(609)},448:(t,e,s)=>{"use strict";var i=s(867),n=s(26),r=s(372),a=s(327),o=s(97),c=s(109),h=s(985),l=s(61),u=s(655),d=s(263);t.exports=function(t){return new Promise((function(e,s){var y,p=t.data,f=t.headers,m=t.responseType;function g(){t.cancelToken&&t.cancelToken.unsubscribe(y),t.signal&&t.signal.removeEventListener("abort",y)}i.isFormData(p)&&delete f["Content-Type"];var x=new XMLHttpRequest;if(t.auth){var v=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(v+":"+w)}var b=o(t.baseURL,t.url);function k(){if(x){var i="getAllResponseHeaders"in x?c(x.getAllResponseHeaders()):null,r={data:m&&"text"!==m&&"json"!==m?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:i,config:t,request:x};n((function(t){e(t),g()}),(function(t){s(t),g()}),r),x=null}}if(x.open(t.method.toUpperCase(),a(b,t.params,t.paramsSerializer),!0),x.timeout=t.timeout,"onloadend"in x?x.onloadend=k:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(k)},x.onabort=function(){x&&(s(l("Request aborted",t,"ECONNABORTED",x)),x=null)},x.onerror=function(){s(l("Network Error",t,null,x)),x=null},x.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",i=t.transitional||u.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),s(l(e,t,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",x)),x=null},i.isStandardBrowserEnv()){var S=(t.withCredentials||h(b))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;S&&(f[t.xsrfHeaderName]=S)}"setRequestHeader"in x&&i.forEach(f,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete f[e]:x.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(x.withCredentials=!!t.withCredentials),m&&"json"!==m&&(x.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&x.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(y=function(t){x&&(s(!t||t&&t.type?new d("canceled"):t),x.abort(),x=null)},t.cancelToken&&t.cancelToken.subscribe(y),t.signal&&(t.signal.aborted?y():t.signal.addEventListener("abort",y))),p||(p=null),x.send(p)}))}},609:(t,e,s)=>{"use strict";var i=s(867),n=s(849),r=s(321),a=s(185),o=function t(e){var s=new r(e),o=n(r.prototype.request,s);return i.extend(o,r.prototype,s),i.extend(o,s),o.create=function(s){return t(a(e,s))},o}(s(655));o.Axios=r,o.Cancel=s(263),o.CancelToken=s(972),o.isCancel=s(502),o.VERSION=s(288).version,o.all=function(t){return Promise.all(t)},o.spread=s(713),o.isAxiosError=s(268),t.exports=o,t.exports.default=o},263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,s)=>{"use strict";var i=s(263);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var s=this;this.promise.then((function(t){if(s._listeners){var e,i=s._listeners.length;for(e=0;e<i;e++)s._listeners[e](t);s._listeners=null}})),this.promise.then=function(t){var e,i=new Promise((function(t){s.subscribe(t),e=t})).then(t);return i.cancel=function(){s.unsubscribe(e)},i},t((function(t){s.reason||(s.reason=new i(t),e(s.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},n.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,s)=>{"use strict";var i=s(867),n=s(327),r=s(782),a=s(572),o=s(185),c=s(875),h=c.validators;function l(t){this.defaults=t,this.interceptors={request:new r,response:new r}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&c.assertOptions(e,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var n,r=[];if(this.interceptors.response.forEach((function(t){r.push(t.fulfilled,t.rejected)})),!i){var l=[a,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(r),n=Promise.resolve(t);l.length;)n=n.then(l.shift(),l.shift());return n}for(var u=t;s.length;){var d=s.shift(),y=s.shift();try{u=d(u)}catch(t){y(t);break}}try{n=a(u)}catch(t){return Promise.reject(t)}for(;r.length;)n=n.then(r.shift(),r.shift());return n},l.prototype.getUri=function(t){return t=o(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,s){return this.request(o(s||{},{method:t,url:e,data:(s||{}).data}))}})),i.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,s,i){return this.request(o(i||{},{method:t,url:e,data:s}))}})),t.exports=l},782:(t,e,s)=>{"use strict";var i=s(867);function n(){this.handlers=[]}n.prototype.use=function(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},97:(t,e,s)=>{"use strict";var i=s(793),n=s(303);t.exports=function(t,e){return t&&!i(e)?n(t,e):e}},61:(t,e,s)=>{"use strict";var i=s(481);t.exports=function(t,e,s,n,r){var a=new Error(t);return i(a,e,s,n,r)}},572:(t,e,s)=>{"use strict";var i=s(867),n=s(527),r=s(502),a=s(655),o=s(263);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new o("canceled")}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=n.call(t,t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return c(t),e.data=n.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(c(t),e&&e.response&&(e.response.data=n.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,s,i,n){return t.config=e,s&&(t.code=s),t.request=i,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},185:(t,e,s)=>{"use strict";var i=s(867);t.exports=function(t,e){e=e||{};var s={};function n(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function r(s){return i.isUndefined(e[s])?i.isUndefined(t[s])?void 0:n(void 0,t[s]):n(t[s],e[s])}function a(t){if(!i.isUndefined(e[t]))return n(void 0,e[t])}function o(s){return i.isUndefined(e[s])?i.isUndefined(t[s])?void 0:n(void 0,t[s]):n(void 0,e[s])}function c(s){return s in e?n(t[s],e[s]):s in t?n(void 0,t[s]):void 0}var h={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return i.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=h[t]||r,n=e(t);i.isUndefined(n)&&e!==c||(s[t]=n)})),s}},26:(t,e,s)=>{"use strict";var i=s(61);t.exports=function(t,e,s){var n=s.config.validateStatus;s.status&&n&&!n(s.status)?e(i("Request failed with status code "+s.status,s.config,null,s.request,s)):t(s)}},527:(t,e,s)=>{"use strict";var i=s(867),n=s(655);t.exports=function(t,e,s){var r=this||n;return i.forEach(s,(function(s){t=s.call(r,t,e)})),t}},655:(t,e,s)=>{"use strict";var i=s(867),n=s(16),r=s(481),a={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var c,h={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=s(448)),c),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)||e&&"application/json"===e["Content-Type"]?(o(e,"application/json"),function(t,e,s){if(i.isString(t))try{return(0,JSON.parse)(t),i.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||h.transitional,s=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,a=!s&&"json"===this.responseType;if(a||n&&i.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(a){if("SyntaxError"===t.name)throw r(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(t){h.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){h.headers[t]=i.merge(a)})),t.exports=h},288:t=>{t.exports={version:"0.24.0"}},849:t=>{"use strict";t.exports=function(t,e){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return t.apply(e,s)}}},327:(t,e,s)=>{"use strict";var i=s(867);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,s){if(!e)return t;var r;if(s)r=s(e);else if(i.isURLSearchParams(e))r=e.toString();else{var a=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(n(e)+"="+n(t))})))})),r=a.join("&")}if(r){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,s)=>{"use strict";var i=s(867);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,s,n,r,a){var o=[];o.push(t+"="+encodeURIComponent(e)),i.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),i.isString(n)&&o.push("path="+n),i.isString(r)&&o.push("domain="+r),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},985:(t,e,s)=>{"use strict";var i=s(867);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function n(t){var i=t;return e&&(s.setAttribute("href",i),i=s.href),s.setAttribute("href",i),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return t=n(window.location.href),function(e){var s=i.isString(e)?n(e):e;return s.protocol===t.protocol&&s.host===t.host}}():function(){return!0}},16:(t,e,s)=>{"use strict";var i=s(867);t.exports=function(t,e){i.forEach(t,(function(s,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=s,delete t[i])}))}},109:(t,e,s)=>{"use strict";var i=s(867),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,s,r,a={};return t?(i.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),s=i.trim(t.substr(r+1)),e){if(a[e]&&n.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([s]):a[e]?a[e]+", "+s:s}})),a):a}},713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},875:(t,e,s)=>{"use strict";var i=s(288).version,n={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){n[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}}));var r={};n.transitional=function(t,e,s){function n(t,e){return"[Axios v"+i+"] Transitional option '"+t+"'"+e+(s?". "+s:"")}return function(s,i,a){if(!1===t)throw new Error(n(i," has been removed"+(e?" in "+e:"")));return e&&!r[i]&&(r[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(s,i,a)}},t.exports={assertOptions:function(t,e,s){if("object"!=typeof t)throw new TypeError("options must be an object");for(var i=Object.keys(t),n=i.length;n-- >0;){var r=i[n],a=e[r];if(a){var o=t[r],c=void 0===o||a(o,r,t);if(!0!==c)throw new TypeError("option "+r+" must be "+c)}else if(!0!==s)throw Error("Unknown option "+r)}},validators:n}},867:(t,e,s)=>{"use strict";var i=s(849),n=Object.prototype.toString;function r(t){return"[object Array]"===n.call(t)}function a(t){return void 0===t}function o(t){return null!==t&&"object"==typeof t}function c(t){if("[object Object]"!==n.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function h(t){return"[object Function]"===n.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:o,isPlainObject:c,isUndefined:a,isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:h,isStream:function(t){return o(t)&&h(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function s(s,i){c(e[i])&&c(s)?e[i]=t(e[i],s):c(s)?e[i]=t({},s):r(s)?e[i]=s.slice():e[i]=s}for(var i=0,n=arguments.length;i<n;i++)l(arguments[i],s);return e},extend:function(t,e,s){return l(e,(function(e,n){t[n]=s&&"function"==typeof e?i(e,s):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t extends Phaser.GameObjects.Container{constructor(t,e,s,i,n){super(t),this.scene=t,this.x=e,this.y=s,this.btn=t.add.image(e,s,i).setOrigin(0),this.btn.setInteractive().on("pointerdown",n)}get width(){return this.btn.width}get height(){return this.btn.height}update(t,e){t&&(this.x=t,this.btn.x=t),e&&(this.y=e,this.btn.y=e)}destroy(){this.btn.destroy()}}var e=s(669),i=s.n(e);class n extends Phaser.Scene{constructor(t,e){super(),this.playPreroll=t,this.callback=e}preload(){try{document.getElementsByClassName("grecaptcha-badge")[0].style.opacity=100}catch(t){console.log("captcha hasnt loaded yet")}}create(){this.optimalServer="us2";const e=(t=!0)=>{var e={us1:"https://us2.swordbattle.io",us2:"https://sword-io-game.herokuapp.com",eu1:"https://swordbattle.herokuapp.com"},s=t=>new Promise(((s,i)=>{var n=Date.now(),r={error:!1,ping:0,info:{}};fetch(e[t]+"/api/serverinfo?t="+Date.now()).then((t=>{200==t.status?(r.ping=Date.now()-n,t.json().then((t=>{r.info=t,s(r)})).catch((t=>{r.error=!0,s(r)}))):(r.error=!0,s(r))})).catch((t=>{r.error=!0,s(r)}))})),i=[],n=["us1","us2","eu1"],r=["USA","USA 2","Europe"];s("us1").then((e=>{i.push(e),s("us2").then((e=>{i.push(e),s("eu1").then((e=>{if(i.push(e),i.filter((t=>t.error)).length==i.length)alert("Could not find an available server. Please try again later.");else{var s=i.map((t=>2*t.ping-(t.info.actualPlayercount?30*t.info.actualPlayercount:0)+("No lag"==t.info.lag?0:"Moderate lag"==t.info.lag?250:1e3)+(t.info.playerCount>15?100*Math.abs(15-t.info.playerCount):0))).map((t=>t||1/0)),a=n[s.indexOf(Math.min(...s))];console.log("optimal server found: "+a+" with score: "+Math.min(...s)),this.optimalServer=a,console.log(t),t&&(n.forEach(((t,e)=>{document.getElementById(t).innerHTML=r[e]+(i[e].error?" (OFFLINE)":` (${i[e].ping}ms, ${i[e].info.playerCount} players)`)})),document.getElementById("auto").innerHTML="Auto ("+r[s.indexOf(Math.min(...s))]+")")}}))}))}))};var s=(t,e,s)=>t<e?e:t>s?s:t;this.footerdone=!1,this.redirect=!1;var n=!0;try{window.localStorage}catch(t){n=!1}n?window.localStorage.getItem("options")?this.options=JSON.parse(window.localStorage.getItem("options")):(this.options={movementMode:"mouse",sound:"normal",server:"auto"},window.localStorage.setItem("options",JSON.stringify(this.options))):this.options={movementMode:"mouse",sound:"normal",server:"auto"};try{this.music=this.sound.add("openingsound",{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!0,delay:0}),this.music.play()}catch(t){return}this.background=this.add.image(0,0,"opening").setOrigin(0).setScrollFactor(0,0).setScale(2),this.footer=this.add.dom(this.canvas.width/2,this.canvas.height).createFromCache("footer").setOrigin(.5).setScale(this.mobile?1:2),this.nameBox=this.add.dom(this.canvas.width/2,0).createFromCache("title"),this.showPromo&&(this.promo=this.add.dom(0,0).createFromCache("promo"),this.promo.x=this.canvas.width/2,this.promo.y=this.canvas.height/2,this.promo.getChildByName("close").onclick=()=>{this.promo.destroy()},e(!1)),this.nameBox.getChildByName("name").value=n&&window.localStorage.getItem("oldName")?window.localStorage.getItem("oldName"):"",this.done=!1,this.text=this.add.text(this.canvas.width/2,0,"Swordbattle.io",{fontSize:"64px",fill:"#000000"}).setOrigin(.5),"normal"==this.options.sound?this.music.volume=.5:"high"==this.options.sound?this.music.volume=1:"low"==this.options.sound?this.music.volume=.2:"off"==this.options.sound?this.music.volume=0:(this.options.sound="normal",this.music.volume=.5,n&&window.localStorage.setItem("options",JSON.stringify(this.options))),this.options.hasOwnProperty("server")||(this.options.server="auto",n&&window.localStorage.setItem("options",JSON.stringify(this.options))),this.settingsBtn=new t(this,0,0,"settingsBtn",(()=>{if(!(this.promo&&this.promo.visible||this.login&&this.login.visible||this.signup&&this.signup.visible)){if(this.settings&&this.settings.visible)return this.settings.destroy();this.settings=this.add.dom(0,0).createFromCache("settings"),this.settings.x=this.canvas.width/2,this.settings.y=this.canvas.height/2,this.settings.getChildByName("close").onclick=()=>{this.settings.destroy()},document.getElementById("movement").value=this.options.movementMode,document.getElementById("sound").value=this.options.sound,document.getElementById("server").value=this.options.server,e(),document.getElementById("movement").onchange=()=>{this.options.movementMode=document.getElementById("movement").value,n&&window.localStorage.setItem("options",JSON.stringify(this.options))},document.getElementById("sound").onchange=()=>{this.options.sound=document.getElementById("sound").value,n&&window.localStorage.setItem("options",JSON.stringify(this.options)),"normal"==this.options.sound?this.music.volume=.6:"high"==this.options.sound?this.music.volume=1.2:"low"==this.options.sound?this.music.volume=.2:"off"==this.options.sound&&(this.music.volume=0)},document.getElementById("server").onchange=()=>{this.options.server=document.getElementById("server").value,n&&window.localStorage.setItem("options",JSON.stringify(this.options))}}}));const r=()=>{let t=this.nameBox.getChildByName("name");if(t&&""!=t.value&&!this.done){this.done=!0,n&&window.localStorage.setItem("oldName",t.value);var e=t.value;this.playPreroll&&void 0!==aiptag.adplayer?(this.nameBox.getChildByName("btn").innerHTML="Connecting..",this.nameBox.getChildByName("btn").style.backgroundColor="grey",this.music.stop(),aiptag.cmd.player.push((()=>{aiptag.adplayer=new aipPlayer({AD_WIDTH:960,AD_HEIGHT:540,AD_FULLSCREEN:!0,AD_CENTERPLAYER:!1,LOADING_TEXT:"loading advertisement",PREROLL_ELEM:function(){return document.getElementById("preroll")},AIP_COMPLETE:t=>{this.nameBox.destroy(),document.getElementById("game").focus(),this.callback(e,this.music,this.secret),console.log("Preroll Ad Completed: "+t)}})})),aiptag.cmd.player.push((()=>{aiptag.adplayer.startPreRoll()}))):(this.nameBox.destroy(),this.callback(e,this.music,this.secret))}};var a=()=>{this.promo&&this.promo.visible?this.promo.destroy():this.login&&this.login.visible?this.login.getChildByName("login").click():this.signup&&this.signup.visible?this.signup.getChildByName("signup").click():this.nameBox.getChildByName("btn").disabled||(this.settings&&this.settings.visible?this.settings.destroy():r())};this.nameBox.getChildByName("btn").onclick=()=>{a()},this.returnKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER,!1),this.returnKey.on("down",(t=>{a()}));var o=!1;this.secret=void 0;const c=t=>{this.nameBox.getChildByName("btn").innerHTML="Connecting..",this.nameBox.getChildByName("btn").disabled=!0,console.log("Attempting to login"),grecaptcha.ready((()=>{grecaptcha.execute("6LdVxgYdAAAAAPtvjrXLAzSd2ANyzIkiSqk_yFpt",{action:"relogin"}).then((e=>{i().post("/api/loginsecret",{secret:t,captcha:e}).then((e=>{if(e.data.error){alert("Login Error: "+e.data.error);try{window.localStorage.getItem("secret")&&window.localStorage.removeItem("secret")}catch(t){}return l(),void console.log(e)}try{window.localStorage.setItem("secret",t)}catch(t){console.log("Failed to save secret"),console.log(t)}o=!0,this.secret=t,console.log("Logged in"),this.loginButton&&this.loginButton.destroy(),this.signupButton&&this.signupButton.destroy(),this.nameBox&&this.nameBox.visible&&(this.nameBox.getChildByName("name").value=e.data.username,this.nameBox.getChildByName("name").disabled=!0,this.nameBox.getChildByName("name").classList.add("loggedin"),this.nameBox.getChildByName("btn").innerHTML="Play!",this.nameBox.getChildByName("btn").disabled=!1,this.accountData=e.data,h())})).catch((t=>{console.log("Login Error: "),console.log(t),alert("Failed to login automatically, please try manually.")}))}))}))};var h=()=>{this.dropdown=this.add.dom(0,0).createFromCache("dropdown").setOrigin(0),document.getElementById("username").innerHTML=this.accountData.username,document.getElementById("profile").setAttribute("onclick",`location.href='/${this.accountData.username}'`),this.nameBox.getChildByName("name").classList.add("loggedin"),this.nameBox.getChildByName("name").disabled=!0,document.getElementById("username").style.fontSize="30px",this.dropdown.x=this.canvas.width/1.2-document.getElementById("username").getBoundingClientRect().width,this.dropdown.y=-20,document.getElementById("logout").onclick=()=>{this.dropdown.destroy();try{window.localStorage.removeItem("secret")}catch(t){console.log("failed to clear local storage")}this.secret=void 0,this.accountData=void 0,o=!1,this.nameBox.getChildByName("name").disabled=!1,this.nameBox.getChildByName("name").classList.remove("loggedin"),this.nameBox.getChildByName("name").value="";try{window.localStorage.removeItem("oldName")}catch(t){console.log("failed to clear local storage oldname")}l(),d()}};this.shopBtn=new t(this,10,10,"shopBtn",(()=>{document.getElementById("shopFrame").contentWindow.location.replace("/shop?secret="+this.secret),document.getElementById("shopFrame").onload=()=>{var t=document.getElementById("shopFrame").contentWindow.document;document.getElementById("shopFrame").style.display="",t.getElementById("closeShop").onclick=()=>{document.getElementById("shopFrame").style.display="none"}}})),this.shopBtn.btn.setScale(this.canvas.width/6e3),this.shopBtn.btn.setScale(4*this.shopBtn.btn.scale);var l=()=>{o||(this.loginButton=new t(this,this.canvas.width-(this.canvas.width>610?300:100),0,"loginbtn",(()=>{this.promo&&this.promo.visible||this.signup&&this.signup.visible||this.settings&&this.settings.visible||this.login&&this.login.visible||(this.login=this.add.dom(0,0).createFromCache("login"),this.login.x=this.canvas.width/2,this.login.y=this.canvas.height/2,this.login.getChildByName("close").onclick=()=>{this.login.destroy()},this.login.getChildByName("login").onclick=()=>{grecaptcha.ready((()=>{grecaptcha.execute("6LdVxgYdAAAAAPtvjrXLAzSd2ANyzIkiSqk_yFpt",{action:"login"}).then((t=>{try{var e=this.login.getChildByName("username").value,s=this.login.getChildByName("password").value;if(""==e.trim()||""==s)return;this.login.getChildByName("login").innerHTML="Logging in..",this.login.getChildByName("login").disabled=!0,this.login.getChildByName("close").disabled=!0,i().post("/api/login",{username:e,password:s,captcha:t}).then((t=>{if(t.data.error)alert(t.data.error),this.login.getChildByName("login").disabled=!1,this.login.getChildByName("close").disabled=!1,this.login.getChildByName("login").innerHTML="Login";else{this.login.getChildByName("login").disabled=!1,this.login.getChildByName("close").disabled=!1,this.login.getChildByName("login").innerHTML="Login",this.login.destroy();try{c(t.data.secret)}catch(t){console.log("Failed to login"),console.log(t)}}})).catch((t=>{alert("Unexpected error, please try again later"),console.log(t),this.login.getChildByName("login").disabled=!1,this.login.getChildByName("close").disabled=!1,this.login.getChildByName("login").innerHTML="Login"}))}catch(t){console.log(t)}}))}))})})),this.signupButton=new t(this,this.canvas.width-(this.canvas.width>610?300:100),0,"signupbtn",(()=>{this.promo&&this.promo.visible||this.signup&&this.signup.visible||this.settings&&this.settings.visible||this.login&&this.login.visible||(this.signup=this.add.dom(0,0).createFromCache("signup"),this.signup.x=this.canvas.width/2,this.signup.y=this.canvas.height/2,this.signup.getChildByName("close").onclick=()=>{this.signup.destroy()},this.signup.getChildByName("signup").onclick=()=>{grecaptcha.ready((()=>{grecaptcha.execute("6LdVxgYdAAAAAPtvjrXLAzSd2ANyzIkiSqk_yFpt",{action:"signup"}).then((t=>{try{var e=this.signup.getChildByName("username").value,s=this.signup.getChildByName("password").value,n=this.signup.getChildByName("email").value;if(""==e.trim()||""==s)return;this.signup.getChildByName("signup").innerHTML="Signing up..",this.signup.getChildByName("signup").disabled=!0,this.signup.getChildByName("close").disabled=!0,i().post("/api/signup",{username:e,password:s,email:n,captcha:t}).then((t=>{if(t.data.error)alert(t.data.error),this.signup.getChildByName("signup").disabled=!1,this.signup.getChildByName("close").disabled=!1,this.signup.getChildByName("signup").innerHTML="Sign Up";else{this.signup.getChildByName("signup").disabled=!1,this.signup.getChildByName("close").disabled=!1,this.signup.getChildByName("signup").innerHTML="Sign Up",this.signup.destroy();try{c(t.data.secret)}catch(t){console.log("Failed to login"),console.log(t)}}})).catch((t=>{alert("Unexpected error, please try again later"),console.log(t),this.login.getChildByName("login").disabled=!1,this.login.getChildByName("close").disabled=!1,this.login.getChildByName("login").innerHTML="Login"}))}catch(t){console.log(t)}}))}))})})),this.loginButton.btn.setScale(.25),this.signupButton.btn.setScale(.25))};try{var u=window.localStorage.getItem("secret");u&&!this.accountData?c(u):u&&this.accountData?(this.secret=this.accountData.secret,h()):l()}catch(t){console.log("failed to autologin"),console.log(t)}const d=(t=!1)=>{this.game.scale.resize(this.canvas.width,this.canvas.height);try{const t=this.cameras.main.width,e=this.cameras.main.height;this.shopBtn.btn.setScale(s(this.canvas.width/6e3,.05,.2)),this.shopBtn.btn.setScale(4*this.shopBtn.btn.scale),this.background.setScale(Math.max(t/this.background.width,e/this.background.height)),this.background.x=0-(this.background.displayWidth-t)/2}catch(t){}this.nameBox.x=this.canvas.width/2,this.text.x=this.canvas.width/2,this.settingsBtn.btn.setScale(s(this.canvas.width/1e4,.08,.4)),this.settingsBtn.btn.y=this.canvas.height-this.settingsBtn.btn.displayHeight,this.settings&&this.settings.visible&&(this.settings.x=this.canvas.width/2,this.settings.y=this.canvas.height/2);var e=.17;this.canvas.width<950&&(e-=.035),this.canvas.width<870&&(e-=.025),this.canvas.width<750&&(e-=.015),this.canvas.width<610&&(e-=.015),this.canvas.width<500&&(e-=.0035),this.loginButton&&this.loginButton.btn.setScale(e),this.signupButton&&this.signupButton.btn.setScale(e),this.loginButton&&this.loginButton.update(this.canvas.width-this.loginButton.btn.displayWidth,0),this.signupButton&&this.signupButton.update(this.canvas.width-this.signupButton.btn.displayWidth,this.loginButton.btn.displayHeight+10),this.dropdown&&this.dropdown.visible&&(this.dropdown.x=this.canvas.width/1.2-document.getElementById("username").getBoundingClientRect().width),this.scene.isActive("title")&&(this.promo&&this.promo.visible||this.signup&&this.signup.visible||this.login&&this.login.visible||this.settings&&this.settings.visible||(this.footer.destroy(),this.footer=this.add.dom(this.canvas.width/2,this.canvas.height).createFromCache("footer").setOrigin(.5).setScale(this.mobile?1:2)));var i=this.canvas.height-this.footer.height;this.canvas.height<384&&(i=this.canvas.height-this.footer.height/2),this.footerdone&&(this.text.y=this.canvas.height/4),this.footerdone&&(this.footer.y=i);try{this.text.setFontSize(this.canvas.width/13)}catch(t){}this.footer.x=this.canvas.width/2,this.promo&&this.promo.visible&&(this.promo.x=this.canvas.width/2,this.promo.y=this.canvas.height/2),this.login&&this.login.visible&&(this.login.x=this.canvas.width/2,this.login.y=this.canvas.height/2),this.signup&&this.signup.visible&&(this.signup.x=this.canvas.width/2,this.signup.y=this.canvas.height/2)};var y;window.addEventListener("resize",(function(){clearTimeout(y),y=setTimeout(d,100)})),d(!0);var p=this.canvas.height-this.footer.height;this.canvas.height<384&&(p=this.canvas.height-this.footer.height/2),this.tweens.add({targets:this.footer,y:p,onComplete:()=>{this.footerdone=!0},duration:1e3,ease:"Power2"}),this.tweens.add({targets:this.text,y:this.canvas.height/4,duration:1e3,ease:"Power2"})}update(t){this.nameBox.y=this.mobile?this.text.y+this.text.height/2:this.text.y+this.text.height;var e=this.canvas.height-this.footer.height;this.canvas.height<384&&(e=this.canvas.height-this.footer.height/2),this.footerdone&&this.footer.y!=e&&(this.footer.y=e)}}const r=n,a=class{constructor(t,e,s,i,n,r=!1){this.custom=r,this.bar=new Phaser.GameObjects.Graphics(t).setDepth(99),this.x=e,this.y=s,this.maxValue=100,this.value=0,this.toLerp=0,this.height=n,this.width=i,t.add.existing(this.bar)}setHealth(t){var e,s;return this.value=(e=t,0,s=this.maxValue,Math.min(Math.max(e,0),s)),this.draw(),0===this.value}setLerpValue(t){this.toLerp=t}draw(){this.bar.clear(),this.bar.fillStyle(0),this.bar.fillRect(this.x,this.y,this.width,this.height),this.bar.fillStyle(16777215),this.bar.fillRect(this.x+2,this.y+2,this.width-4,this.height-4),this.custom?this.bar.fillStyle(65535):this.value/this.maxValue<.3?this.bar.fillStyle(16711680):this.value/this.maxValue<.5?this.bar.fillStyle(16776960):this.bar.fillStyle(65280);var t=Math.floor((this.width-4)*(this.value/this.maxValue));this.bar.fillRect(this.x+2,this.y+2,t,this.height-4)}update(){this.setHealth((1-.25)*this.value+.25*this.toLerp)}destroy(){this.bar.destroy()}};function o(t,e){for(var s=e.length,i=new Array(s+1),n=0;n<s;++n)i[n]=e[n];return i[s]=t,i}function c(t,e,s){for(var i=e,n=0,r=s.length;n<r;++n)i=t(i,s[n],n);return i}function h(t,e){for(var s=e.length,i=new Array(s),n=0,r=void 0,a=0;a<s;++a)t(r=e[a])||(i[n]=r,++n);return i.length=n,i}function l(t,e){for(var s=0,i=e.length;s<i;++s)if(t===e[s])return s;return-1}var u=function(t){return t},d=function(t,e){return t(e)};function y(t){return function e(s,i){switch(arguments.length){case 0:return e;case 1:return function(e){return t(s,e)};default:return t(s,i)}}}function p(t){return function e(s,i,n){switch(arguments.length){case 0:return e;case 1:return y((function(e,i){return t(s,e,i)}));case 2:return function(e){return t(s,i,e)};default:return t(s,i,n)}}}var f=function(){function t(t,e,s,i,n){this.time=t,this.localOffset=e,this.period=s,this.task=i,this.scheduler=n,this.active=!0}return t.prototype.run=function(){return this.task.run(this.time-this.localOffset)},t.prototype.error=function(t){return this.task.error(this.time-this.localOffset,t)},t.prototype.dispose=function(){return this.active=!1,this.scheduler.cancel(this),this.task.dispose()},t}(),m=function(){function t(t,e){this.origin=t,this.scheduler=e}return t.prototype.currentTime=function(){return this.scheduler.currentTime()-this.origin},t.prototype.scheduleTask=function(t,e,s,i){return this.scheduler.scheduleTask(t+this.origin,e,s,i)},t.prototype.relative=function(e){return new t(e+this.origin,this.scheduler)},t.prototype.cancel=function(t){return this.scheduler.cancel(t)},t.prototype.cancelAll=function(t){return this.scheduler.cancelAll(t)},t}();function g(t){try{return t.run()}catch(e){return t.error(e)}}var x=function(){function t(t,e){var s=this;this._runReadyTasksBound=function(){return s._runReadyTasks()},this.timer=t,this.timeline=e,this._timer=null,this._nextArrival=1/0}return t.prototype.currentTime=function(){return this.timer.now()},t.prototype.scheduleTask=function(t,e,s,i){var n=this.currentTime()+Math.max(0,e),r=new f(n,t,s,i,this);return this.timeline.add(r),this._scheduleNextRun(),r},t.prototype.relative=function(t){return new m(t,this)},t.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},t.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},t.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun()},t.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},t.prototype._scheduleNextRun=function(){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t))}},t.prototype._scheduleNextArrival=function(t){this._nextArrival=t;var e=Math.max(0,t-this.currentTime());this._timer=this.timer.setTimer(this._runReadyTasksBound,e)},t.prototype._runReadyTasks=function(){this._timer=null,this.timeline.runTasks(this.currentTime(),g),this._scheduleNextRun()},t}(),v=function(){function t(){this.tasks=[]}return t.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},t.prototype.isEmpty=function(){return 0===this.tasks.length},t.prototype.add=function(t){b(t,this.tasks)},t.prototype.remove=function(t){var e=T(k(t),this.tasks);if(e>=0&&e<this.tasks.length){var s=this.tasks[e].events,i=l(t,s);if(i>=0)return s.splice(i,1),0===s.length&&this.tasks.splice(e,1),!0}return!1},t.prototype.removeAll=function(t){for(var e=0;e<this.tasks.length;++e)S(t,this.tasks[e])},t.prototype.runTasks=function(t,e){for(var s=this.tasks,i=s.length,n=0;n<i&&s[n].time<=t;)++n;this.tasks=s.slice(n);for(var r=0;r<n;++r)this.tasks=w(e,s[r].events,this.tasks)},t}();function w(t,e,s){for(var i=0;i<e.length;++i){var n=e[i];n.active&&(t(n),n.period>=0&&n.active&&(n.time=n.time+n.period,b(n,s)))}return s}function b(t,e){var s=e.length,i=k(t);if(0!==s){var n=T(i,e);n>=s?e.push(B(i,[t])):function(t,e,s,i){var n=e[i];s===n.time?function(t,e){0===e.length||t.time>=e[e.length-1].time?e.push(t):function(t,e){for(var s=0;s<e.length;s++)if(t.time<e[s].time){e.splice(s,0,t);break}}(t,e)}(t,n.events):e.splice(i,0,B(s,[t]))}(t,e,i,n)}else e.push(B(i,[t]))}function k(t){return Math.floor(t.time)}function S(t,e){e.events=h(t,e.events)}function T(t,e){for(var s,i,n=0,r=e.length;n<r;){if(t===(i=e[s=Math.floor((n+r)/2)]).time)return s;t<i.time?r=s:n=s+1}return r}var B=function(t,e){return{time:t,events:e}},A=function(){function t(t){this._clock=t}return t.prototype.now=function(){return this._clock.now()},t.prototype.setTimer=function(t,e){return e<=0?function(t){var e=new C(t);return function(t){Promise.resolve(t).then(g)}(e),e}(t):setTimeout(t,e)},t.prototype.clearTimer=function(t){return t instanceof C?t.cancel():clearTimeout(t)},t}(),C=function(){function t(t){this.f=t,this.active=!0}return t.prototype.run=function(){if(this.active)return this.f()},t.prototype.error=function(t){throw t},t.prototype.cancel=function(){this.active=!1},t}(),O=function(){function t(t,e){this.origin=e,this.clock=t}return t.prototype.now=function(){return this.clock.now()-this.origin},t}(),P=function(){function t(t,e){this.origin=e,this.hrtime=t}return t.prototype.now=function(){var t=this.hrtime(this.origin);return(1e9*t[0]+t[1])/1e6},t}(),E=function(t){return new O(t,t.now())},j=function(t){return t.currentTime()},_=y((function(t,e){return e.scheduleTask(0,0,-1,t)})),M=p((function(t,e,s){return s.scheduleTask(0,t,-1,e)})),N=(p((function(t,e,s){return s.scheduleTask(0,0,t,e)})),function(t){return t.dispose()}),D=(y((function(t,e){return console.warn("DEPRECATED cancelAllTasks to be removed in 2.0.0"),e.cancelAll(t)})),y((function(t,e){return new m(t,e)}))),F=(y((function(t,e){return new x(t,e)})),function(){return new x(I(),new v)}),I=function(){return new A("undefined"!=typeof performance&&"function"==typeof performance.now?E(performance):"undefined"!=typeof process&&"function"==typeof process.hrtime?new P(process.hrtime,process.hrtime()):E(Date))},R=function(){return L},L=new(function(){function t(){}return t.prototype.dispose=function(){},t}()),z=function(t){return new H(t)},H=function(){function t(t){this.disposed=!1,this.disposable=t}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposable&&(this.disposable.dispose(),this.disposable=void 0))},t}(),U=(y((function(t,e){return z(new U(t,e))})),function(){function t(t,e){this._dispose=t,this._resource=e}return t.prototype.dispose=function(){this._dispose(this._resource)},t}()),q=function(t){var e=c(V,[],t);return 0===e.length?R():new W(e)},G=y((function(t,e){return q([t,e])})),V=function(t,e){return function(t){return t===L}(e)?t:e instanceof W?function(t,e){var s=t.length,i=e.length,n=new Array(s+i),r=0;for(r=0;r<s;r++)n[r]=t[r];for(var a=0;a<i;a++)n[r++]=e[a];return n}(t,e.disposables):o(e,t)},W=function(){function t(t){this.disposables=t}return t.prototype.dispose=function(){$(K(this.disposables))},t}(),K=function(t){return c(J,[],t)},J=function(t,e){try{e.dispose()}catch(e){t.push(e)}return t},$=function(t){if(t.length>0)throw new Y(t.length+" errors",t)},Y=function t(e,s){this.name="DisposeAllError",this.message=e,this.errors=s,Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.stack=""+this.stack+X(this.errors)};Y.prototype=Object.create(Error.prototype);var X=function(t){return c(Z,"",t)},Z=function(t,e,s){return t+"\n["+(s+1)+"] "+e.stack},Q=p((function(t,e,s){try{e.dispose()}catch(e){s.error(t,e)}})),tt=function(t,e){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])},tt(t,e)};function et(t,e){function s(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}function st(t){setTimeout(it,0,t)}function it(t){throw t}var nt=function(t,e,s){return new ht(t,e,s)},rt=function(t,e){return new lt(t,e)},at=function(t){return new ut(t)},ot=function(t,e){return new dt(t,e)},ct=function(){function t(t){this.sink=t,this.active=!0}return t.prototype.dispose=function(){this.active=!1},t.prototype.run=function(t){this.active&&this.runIfActive(t)},t.prototype.error=function(t,e){if(!this.active)return st(e);this.sink.error(t,e)},t}(),ht=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.runEvent=e,n.value=s,n}return et(e,t),e.prototype.runIfActive=function(t){this.runEvent(t,this.value,this.sink)},e}(ct),lt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.value=e,i}return et(e,t),e.prototype.runIfActive=function(t){this.sink.event(t,this.value)},e}(ct),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.runIfActive=function(t){this.sink.end(t)},e}(ct),dt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.value=e,i}return et(e,t),e.prototype.runIfActive=function(t){this.sink.error(t,this.value)},e}(ct),yt=function(){return mt},pt=function(t){return t===mt},ft=function(t){return t.some(pt)},mt=new(function(){function t(){}return t.prototype.run=function(t,e){return _(at(t),e)},t}()),gt=(new(function(){function t(){}return t.prototype.run=function(){return R()},t}()),function(t,e){return new xt(t,e)}),xt=function(){function t(t,e){this.time=t,this.value=e}return t.prototype.run=function(t,e){return M(this.time,nt(vt,this.value,t),e)},t}();function vt(t,e,s){s.event(t,e),s.end(t)}var wt=function(t){return gt(0,t)},bt=function(){function t(){this.disposable=void 0,this.disposed=!1}return t.prototype.setDisposable=function(t){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=t,this.disposed&&t.dispose()},t.prototype.dispose=function(){this.disposed||(this.disposed=!0,void 0!==this.disposable&&this.disposable.dispose())},t}(),kt=y((function(t,e){return new Promise((function(s,i){return function(t,e,s,i){var n=new bt,r=new St(s,i,n);n.setDisposable(t.run(r,e))}(t,e,s,i)}))})),St=function(){function t(t,e,s){this._end=t,this._error=e,this._disposable=s,this.active=!0}return t.prototype.event=function(){},t.prototype.end=function(){this.active&&this.dispose(this._error,this._end,void 0)},t.prototype.error=function(t,e){this.dispose(this._error,this._error,e)},t.prototype.dispose=function(t,e,s){this.active=!1,function(t,e,s,i){try{i.dispose()}catch(e){return void t(e)}e(s)}(t,e,s,this._disposable)},t}(),Tt=function(t,e,s){return s.run(t,e)},Bt=function(){function t(t,e){this.sink=e,this.offset=t}return t.prototype.event=function(t,e){this.sink.event(t+this.offset,e)},t.prototype.error=function(t,e){this.sink.error(t+this.offset,e)},t.prototype.end=function(t){this.sink.end(t+this.offset)},t}(),At=function(t,e){return new Ct(t,e)},Ct=function(){function t(t,e){this.origin=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(Ot(this.origin,t),D(this.origin,e))},t}(),Ot=function(t,e){return e instanceof Bt?new Bt(t+e.offset,e.sink):new Bt(t,e)},Pt=function(){function t(t){this.sink=t}return t.prototype.end=function(t){return this.sink.end(t)},t.prototype.error=function(t,e){return this.sink.error(t,e)},t}(),Et=function(){function t(t,e,s){this.step=t,this.seed=e,this.source=s}return t.prototype.run=function(t,e){return this.source.run(new jt(this.step,this.seed,t),e)},t}(),jt=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.step=e,n.seed=s,n}return et(e,t),e.prototype.event=function(t,e){var s=this.step(this.seed,e);this.seed=s.seed,this.sink.event(t,s.value)},e}(Pt),_t=function(){function t(t,e,s){this.source=s,this.f=t,this.value=e}return t.prototype.run=function(t,e){var s=_(rt(this.value,t),e),i=this.source.run(new Mt(this.f,this.value,t),e);return G(s,i)},t}(),Mt=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.f=e,n.value=s,n}return et(e,t),e.prototype.event=function(t,e){var s=this.f;this.value=s(this.value,e),this.sink.event(t,this.value)},e}(Pt),Nt=function(t,e){return new Dt(t,e)},Dt=function(){function t(t,e){this.f=t,this.source=e}return t.prototype.run=function(t,e){return new Ft(this.f,this.source,t,e)},t}(),Ft=function(t){function e(e,s,i,n){var r=t.call(this,i)||this;return r.f=e,r.scheduler=n,r.active=!0,r.disposable=z(s.run(r,n)),r}return et(e,t),e.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},e.prototype.end=function(t){this.active&&(Q(t,this.disposable,this.sink),this.startNext(t,this.sink))},e.prototype.startNext=function(t,e){try{this.disposable=this.continue(this.f,t,e)}catch(s){e.error(t,s)}},e.prototype.continue=function(t,e,s){return Tt(s,this.scheduler,At(e,t()))},e.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},e}(Pt),It=function(){function t(t,e){this.p=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new Rt(this.p,t),e)},t.create=function(e,s){return pt(s)?s:s instanceof t?new t(Lt(s.p,e),s.source):new t(e,s)},t}(),Rt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.p=e,i}return et(e,t),e.prototype.event=function(t,e){(0,this.p)(e)&&this.sink.event(t,e)},e}(Pt),Lt=function(t,e){return function(s){return t(s)&&e(s)}},zt=function(){function t(t,e,s){this.p=t,this.f=e,this.source=s}return t.prototype.run=function(t,e){return this.source.run(new Ht(this.p,this.f,t),e)},t}(),Ht=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.p=e,n.f=s,n}return et(e,t),e.prototype.event=function(t,e){var s=this.f;(0,this.p)(e)&&this.sink.event(t,s(e))},e}(Pt),Ut=function(){function t(t,e){this.f=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new qt(this.f,t),e)},t.create=function(e,s){return pt(s)?yt():s instanceof t?new t(function(t,e){return function(s){return t(e(s))}}(e,s.f),s.source):s instanceof It?new zt(s.p,e,s.source):new t(e,s)},t}(),qt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.f=e,i}return et(e,t),e.prototype.event=function(t,e){var s=this.f;this.sink.event(t,s(e))},e}(Pt),Gt=function(t,e){return Ut.create(t,e)},Vt=function(){function t(t,e){this.source=e,this.f=t}return t.prototype.run=function(t,e){return this.source.run(new Wt(this.f,t),e)},t}(),Wt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.f=e,i}return et(e,t),e.prototype.event=function(t,e){(0,this.f)(e),this.sink.event(t,e)},e}(Pt),Kt=function(t){function e(e,s){var i=t.call(this,s)||this;return i.index=e,i.active=!0,i.value=void 0,i}return et(e,t),e.prototype.event=function(t,e){this.active&&(this.value=e,this.sink.event(t,this))},e.prototype.end=function(t){this.active&&(this.active=!1,this.sink.event(t,this))},e}(Pt);function Jt(t,e){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);case 5:return t(e[0],e[1],e[2],e[3],e[4]);default:return t.apply(void 0,e)}}var $t=function(t,e,s){return Yt(t,[e,s])},Yt=function(t,e){return 0===e.length||ft(e)?yt():1===e.length?Gt(t,e[0]):new Xt(t,e)},Xt=function(){function t(t,e){this.f=t,this.sources=e}return t.prototype.run=function(t,e){for(var s=this.sources.length,i=new Array(s),n=new Array(s),r=new Zt(i,n.length,t,this.f),a=void 0,o=0;o<s;++o)a=n[o]=new Kt(o,r),i[o]=this.sources[o].run(a,e);return q(i)},t}(),Zt=function(t){function e(e,s,i,n){var r=t.call(this,i)||this;return r.disposables=e,r.f=n,r.awaiting=s,r.values=new Array(s),r.hasValue=new Array(s).fill(!1),r.activeCount=s,r}return et(e,t),e.prototype.event=function(t,e){if(e.active){var s=e.index,i=this.updateReady(s);this.values[s]=e.value,0===i&&this.sink.event(t,Jt(this.f,this.values))}else this.dispose(t,e.index)},e.prototype.updateReady=function(t){return this.awaiting>0&&(this.hasValue[t]||(this.hasValue[t]=!0,this.awaiting-=1)),this.awaiting},e.prototype.dispose=function(t,e){Q(t,this.disposables[e],this.sink),0==--this.activeCount&&this.sink.end(t)},e}(Pt),Qt=function(t,e){return te(u,t,e)},te=function(t,e,s){return pt(s)?yt():new ee(t,e,s)},ee=function(){function t(t,e,s){this.f=t,this.concurrency=e,this.source=s}return t.prototype.run=function(t,e){return new se(this.f,this.concurrency,this.source,t,e)},t}(),se=function(){function t(t,e,s,i,n){this.f=t,this.concurrency=e,this.sink=i,this.scheduler=n,this.pending=[],this.current=[],this.disposable=z(s.run(this,n)),this.active=!0}return t.prototype.event=function(t,e){this.addInner(t,e)},t.prototype.addInner=function(t,e){this.current.length<this.concurrency?this.startInner(t,e):this.pending.push(e)},t.prototype.startInner=function(t,e){try{this.initInner(t,e)}catch(e){this.error(t,e)}},t.prototype.initInner=function(t,e){var s=new ne(t,this,this.sink);s.disposable=ie(this.f,t,e,s,this.scheduler),this.current.push(s)},t.prototype.end=function(t){this.active=!1,Q(t,this.disposable,this.sink),this.checkEnd(t)},t.prototype.error=function(t,e){this.active=!1,this.sink.error(t,e)},t.prototype.dispose=function(){this.active=!1,this.pending.length=0,this.disposable.dispose(),q(this.current).dispose()},t.prototype.endInner=function(t,e){var s=this.current.indexOf(e);s>=0&&this.current.splice(s,1),Q(t,e,this);var i=this.pending;i.length>0?this.startInner(t,i.shift()):this.checkEnd(t)},t.prototype.checkEnd=function(t){this.active||0!==this.current.length||this.sink.end(t)},t}(),ie=function(t,e,s,i,n){return t(s).run(i,D(e,n))},ne=function(){function t(t,e,s){this.time=t,this.outer=e,this.sink=s,this.disposable=R()}return t.prototype.event=function(t,e){this.sink.event(t+this.time,e)},t.prototype.end=function(t){this.outer.endInner(t+this.time,this)},t.prototype.error=function(t,e){this.outer.error(t+this.time,e)},t.prototype.dispose=function(){return this.disposable.dispose()},t}(),re=function(t){return Qt(1/0,t)},ae=function(t){return oe(ce(t))},oe=function(t){return 0===t.length?yt():1===t.length?t[0]:new ue(c(le,[],t))},ce=function(t){return t.filter(he)},he=function(t){return!pt(t)},le=function(t,e){return t.concat(e instanceof ue?e.sources:e)},ue=function(){function t(t){this.sources=t}return t.prototype.run=function(t,e){for(var s=this.sources.length,i=new Array(s),n=new Array(s),r=new de(i,n,t),a=void 0,o=0;o<s;++o)a=n[o]=new Kt(o,r),i[o]=this.sources[o].run(a,e);return q(i)},t}(),de=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.disposables=e,n.activeCount=s.length,n}return et(e,t),e.prototype.event=function(t,e){e.active?this.sink.event(t,e.value):this.dispose(t,e.index)},e.prototype.dispose=function(t,e){Q(t,this.disposables[e],this.sink),0==--this.activeCount&&this.sink.end(t)},e}(Pt),ye=function(t,e,s){return pt(s)||pt(e)?yt():new pe(t,e,s)},pe=function(){function t(t,e,s){this.f=t,this.values=e,this.sampler=s}return t.prototype.run=function(t,e){var s=new fe(this.f,t),i=this.values.run(s.latest,e),n=this.sampler.run(s,e);return G(n,i)},t}(),fe=function(t){function e(e,s){var i=t.call(this,s)||this;return i.f=e,i.latest=new me(i),i}return et(e,t),e.prototype.event=function(t,e){if(this.latest.hasValue){var s=this.f;this.sink.event(t,s(this.latest.value,e))}},e}(Pt),me=function(t){function e(e){var s=t.call(this,e)||this;return s.hasValue=!1,s}return et(e,t),e.prototype.event=function(t,e){this.value=e,this.hasValue=!0},e.prototype.end=function(){},e}(Pt),ge=function(t,e){var s=Math.max(0,t);return{min:s,max:Math.max(s,e)}},xe=function(t,e){return ve(0,t,e)},ve=function(t,e,s){return we(ge(t,e),s)},we=function(t,e){return be(t,e)?yt():e instanceof Ut?Se(t,e):e instanceof Be?Te(t,e):ke(t,e)},be=function(t,e){return pt(e)||(s=t).min>=s.max;var s},ke=function(t,e){return(s=t).min<=0&&s.max===1/0?e:new Be(t,e);var s},Se=function(t,e){return Ut.create(e.f,we(t,e.source))},Te=function(t,e){return we((s=e.bounds,i=t,ge(s.min+i.min,Math.min(s.max,s.min+i.max))),e.source);var s,i},Be=function(){function t(t,e){this.source=e,this.bounds=t}return t.prototype.run=function(t,e){var s=new bt,i=new Ae(this.bounds.min,this.bounds.max-this.bounds.min,t,s);return s.setDisposable(this.source.run(i,e)),s},t}(),Ae=function(t){function e(e,s,i,n){var r=t.call(this,i)||this;return r.skip=e,r.take=s,r.disposable=n,r}return et(e,t),e.prototype.event=function(t,e){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(t,e),0===this.take&&(this.disposable.dispose(),this.sink.end(t)))},e}(Pt),Ce=function(){function t(t,e){this.p=t,this.source=e}return t.prototype.run=function(t,e){var s=new bt,i=new Oe(this.p,t,s);return s.setDisposable(this.source.run(i,e)),s},t}(),Oe=function(t){function e(e,s,i){var n=t.call(this,s)||this;return n.p=e,n.active=!0,n.disposable=i,n}return et(e,t),e.prototype.event=function(t,e){if(this.active){var s=this.p;this.active=s(e),this.active?this.sink.event(t,e):(this.disposable.dispose(),this.sink.end(t))}},e}(Pt),Pe=function(){function t(t,e){this.p=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new Ee(this.p,t),e)},t}(),Ee=function(t){function e(e,s){var i=t.call(this,s)||this;return i.p=e,i.skipping=!0,i}return et(e,t),e.prototype.event=function(t,e){if(this.skipping){var s=this.p;if(this.skipping=s(e),this.skipping)return}this.sink.event(t,e)},e}(Pt),je=function(){function t(t,e){this.p=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new _e(this.p,t),e)},t}(),_e=function(t){function e(e,s){var i=t.call(this,s)||this;return i.p=e,i.skipping=!1,i}return et(e,t),e.prototype.event=function(t,e){if(!this.skipping){var s=this.p;this.skipping=s(e),this.sink.event(t,e),this.skipping&&this.sink.end(t)}},e}(Pt),Me=function(t,e,s){return pt(s)||0===e.length?yt():new De(t,e,xe(e.length,s))},Ne=function(t){return t},De=function(){function t(t,e,s){this.f=t,this.items=e,this.source=s}return t.prototype.run=function(t,e){return this.source.run(new Fe(this.f,this.items,t),e)},t}(),Fe=function(t){function e(e,s,i){var n=t.call(this,i)||this;return n.f=e,n.items=s,n.index=0,n}return et(e,t),e.prototype.event=function(t,e){var s=this.f;this.sink.event(t,s(this.items[this.index],e)),this.index+=1},e}(Pt),Ie=function(){function t(){this.head=0,this.tail=0,this.capacityMask=3,this.list=new Array(4)}return t.prototype.push=function(t){var e=this.tail;return this.list[e]=t,this.tail=e+1&this.capacityMask,this.tail===this.head&&this.growArray(),this.head<this.tail?this.tail-this.head:this.capacityMask+1-(this.head-this.tail)},t.prototype.shift=function(){var t=this.head;if(t!==this.tail){var e=this.list[t];return this.list[t]=void 0,this.head=t+1&this.capacityMask,t<2&&this.tail>1e4&&this.tail<=this.list.length>>>2&&this.shrinkArray(),e}},t.prototype.isEmpty=function(){return this.head===this.tail},t.prototype.length=function(){return this.head===this.tail?0:this.head<this.tail?this.tail-this.head:this.capacityMask+1-(this.head-this.tail)},t.prototype.growArray=function(){this.head&&(this.list=this.copyArray(),this.head=0),this.tail=this.list.length,this.list.length*=2,this.capacityMask=this.capacityMask<<1|1},t.prototype.shrinkArray=function(){this.list.length>>>=1,this.capacityMask>>>=1},t.prototype.copyArray=function(){var t,e=[],s=this.list,i=s.length;for(t=this.head;t<i;t++)e.push(s[t]);for(t=0;t<this.tail;t++)e.push(s[t]);return e},t}(),Re=function(t,e){return 0===e.length||ft(e)?yt():1===e.length?Gt(t,e[0]):new Le(t,e)},Le=function(){function t(t,e){this.f=t,this.sources=e}return t.prototype.run=function(t,e){for(var s=this.sources.length,i=new Array(s),n=new Array(s),r=new Array(s),a=new ze(this.f,r,n,t),o=void 0,c=0;c<s;++c)r[c]=new Ie,o=n[c]=new Kt(c,a),i[c]=this.sources[c].run(o,e);return q(i)},t}(),ze=function(t){function e(e,s,i,n){var r=t.call(this,n)||this;return r.f=e,r.sinks=i,r.buffers=s,r}return et(e,t),e.prototype.event=function(t,e){if(e.active){var s=this.buffers,i=s[e.index];if(i.push(e.value),1===i.length()){if(!function(t){for(var e=0,s=t.length;e<s;++e)if(t[e].isEmpty())return!1;return!0}(s))return;He(this.f,t,s,this.sink),function(t,e){for(var s=0,i=t.length;s<i;++s)if(t[s].isEmpty()&&!e[s].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(t)}}else this.dispose(t,e.index)},e.prototype.dispose=function(t,e){this.buffers[e].isEmpty()&&this.sink.end(t)},e}(Pt),He=function(t,e,s,i){return i.event(e,Jt(t,function(t,e){for(var s=e.length,i=new Array(s),n=0;n<s;++n)i[n]=t(e[n]);return i}(Ue,s)))},Ue=function(t){return t.shift()},qe=function(t){return pt(t)?yt():new Ge(t)},Ge=function(){function t(t){this.source=t}return t.prototype.run=function(t,e){var s=new Ve(t,e);return G(s,this.source.run(s,e))},t}(),Ve=function(){function t(t,e){this.sink=t,this.scheduler=e,this.current=null,this.ended=!1}return t.prototype.event=function(t,e){this.disposeCurrent(t),this.current=new We(e,t,1/0,this,this.sink,this.scheduler)},t.prototype.end=function(t){this.ended=!0,this.checkEnd(t)},t.prototype.error=function(t,e){this.ended=!0,this.sink.error(t,e)},t.prototype.dispose=function(){return this.disposeCurrent(j(this.scheduler))},t.prototype.disposeCurrent=function(t){if(null!==this.current)return this.current.dispose(t)},t.prototype.disposeInner=function(t,e){e.dispose(t),e===this.current&&(this.current=null)},t.prototype.checkEnd=function(t){this.ended&&null===this.current&&this.sink.end(t)},t.prototype.endInner=function(t,e){this.disposeInner(t,e),this.checkEnd(t)},t.prototype.errorInner=function(t,e,s){this.disposeInner(t,s),this.sink.error(t,e)},t}(),We=function(){function t(t,e,s,i,n,r){this.min=e,this.max=s,this.outer=i,this.sink=n,this.disposable=t.run(this,D(e,r))}return t.prototype.event=function(t,e){var s=Math.max(0,t+this.min);s<this.max&&this.sink.event(s,e)},t.prototype.end=function(t){this.outer.endInner(t+this.min,this)},t.prototype.error=function(t,e){this.outer.errorInner(t+this.min,e,this)},t.prototype.dispose=function(t){Q(t,this.disposable,this.sink)},t}(),Ke=function(t){return Je(Xe,t)},Je=function(t,e){return pt(e)?yt():new $e(t,e)},$e=function(){function t(t,e){this.equals=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new Ye(this.equals,t),e)},t}(),Ye=function(t){function e(e,s){var i=t.call(this,s)||this;return i.equals=e,i.value=void 0,i.init=!0,i}return et(e,t),e.prototype.event=function(t,e){this.init?(this.init=!1,this.value=e,this.sink.event(t,e)):this.equals(this.value,e)||(this.value=e,this.sink.event(t,e))},e}(Pt);function Xe(t,e){return t===e}var Ze=function(t,e){return new ts(t,e)},Qe=function(t,e){return new es(t,e)},ts=function(){function t(t,e){this.maxSignal=t,this.source=e}return t.prototype.run=function(t,e){var s=new bt,i=this.source.run(t,e),n=this.maxSignal.run(new ns(t,s),e);return s.setDisposable(G(i,n)),s},t}(),es=function(){function t(t,e){this.minSignal=t,this.source=e}return t.prototype.run=function(t,e){var s=new is(this.minSignal,t,e),i=this.source.run(new ss(s,t),e);return G(s,i)},t}(),ss=function(t){function e(e,s){var i=t.call(this,s)||this;return i.min=e,i}return et(e,t),e.prototype.event=function(t,e){this.min.allow&&this.sink.event(t,e)},e}(Pt),is=function(t){function e(e,s,i){var n=t.call(this,s)||this;return n.allow=!1,n.disposable=e.run(n,i),n}return et(e,t),e.prototype.event=function(){this.allow=!0,this.dispose()},e.prototype.end=function(){},e.prototype.dispose=function(){this.disposable.dispose()},e}(Pt),ns=function(t){function e(e,s){var i=t.call(this,e)||this;return i.disposable=s,i}return et(e,t),e.prototype.event=function(t){this.disposable.dispose(),this.sink.end(t)},e.prototype.end=function(){},e}(Pt),rs=function(){function t(t,e){this.dt=t,this.source=e}return t.prototype.run=function(t,e){var s=new as(this.dt,t,e);return G(s,this.source.run(s,e))},t}(),as=function(t){function e(e,s,i){var n=t.call(this,s)||this;return n.dt=e,n.scheduler=i,n.tasks=[],n}return et(e,t),e.prototype.dispose=function(){this.tasks.forEach(N)},e.prototype.event=function(t,e){this.tasks.push(M(this.dt,rt(e,this.sink),this.scheduler))},e.prototype.end=function(){this.tasks.push(M(this.dt,at(this.sink),this.scheduler))},e}(Pt),os=function(t,e){return pt(e)?yt():e instanceof Ut?cs(t,e):e instanceof ls?hs(t,e):new ls(t,e)},cs=function(t,e){return Ut.create(e.f,os(t,e.source))},hs=function(t,e){return new ls(Math.max(t,e.period),e.source)},ls=function(){function t(t,e){this.period=t,this.source=e}return t.prototype.run=function(t,e){return this.source.run(new us(this.period,t),e)},t}(),us=function(t){function e(e,s){var i=t.call(this,s)||this;return i.time=0,i.period=e,i}return et(e,t),e.prototype.event=function(t,e){t>=this.time&&(this.time=t+this.period,this.sink.event(t,e))},e}(Pt),ds=function(){function t(t,e){this.dt=t,this.source=e}return t.prototype.run=function(t,e){return new ys(this.dt,this.source,t,e)},t}(),ys=function(){function t(t,e,s,i){this.dt=t,this.sink=s,this.scheduler=i,this.timer=null,this.disposable=e.run(this,i)}return t.prototype.event=function(t,e){this.clearTimer(),this.value=e,this.timer=M(this.dt,new ps(this,e),this.scheduler)},t.prototype.handleEventFromTask=function(t,e){this.clearTimer(),this.sink.event(t,e)},t.prototype.end=function(t){this.clearTimer()&&(this.sink.event(t,this.value),this.value=void 0),this.sink.end(t)},t.prototype.error=function(t,e){this.clearTimer(),this.sink.error(t,e)},t.prototype.dispose=function(){this.clearTimer(),this.disposable.dispose()},t.prototype.clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},t}(),ps=function(){function t(t,e){this.sink=t,this.value=e}return t.prototype.run=function(t){this.sink.handleEventFromTask(t,this.value)},t.prototype.error=function(t,e){this.sink.error(t,e)},t.prototype.dispose=function(){},t}(),fs=(function(){function t(t,e){var s=this;this.eventBound=function(t){return s.sink.event(j(s.scheduler),t)},this.endBound=function(){return s.sink.end(j(s.scheduler))},this.errorBound=function(t){return s.sink.error(j(s.scheduler),t)},this.sink=t,this.scheduler=e,this.queue=Promise.resolve()}t.prototype.event=function(t,e){var s=this;this.queue=this.queue.then((function(){return s.handlePromise(e)})).catch(this.errorBound)},t.prototype.end=function(){this.queue=this.queue.then(this.endBound).catch(this.errorBound)},t.prototype.error=function(t,e){var s=this;this.queue=this.queue.then((function(){return s.errorBound(e)})).catch(st)},t.prototype.handlePromise=function(t){return t.then(this.eventBound)}}(),function(){function t(t){this.sink=t,this.active=!0}return t.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},t.prototype.end=function(t){this.active&&(this.disable(),this.sink.end(t))},t.prototype.error=function(t,e){this.disable(),this.sink.error(t,e)},t.prototype.disable=function(){return this.active=!1,this.sink},t}());function ms(t,e,s){try{s.event(t,e)}catch(e){s.error(t,e)}}function gs(t,e){try{e.end(t)}catch(s){e.error(t,s)}}var xs=function(){function t(t,e){this.f=t,this.source=e}return t.prototype.run=function(t,e){return new vs(this.f,this.source,t,e)},t}(),vs=function(){function t(t,e,s,i){this.f=t,this.sink=new fs(s),this.scheduler=i,this.disposable=e.run(this,i)}return t.prototype.event=function(t,e){ms(t,e,this.sink)},t.prototype.end=function(t){gs(t,this.sink)},t.prototype.error=function(t,e){var s=this.sink.disable();Q(t,this.disposable,this.sink),this._startNext(t,e,s)},t.prototype._startNext=function(t,e,s){try{this.disposable=this._continue(this.f,t,e,s)}catch(e){s.error(t,e)}},t.prototype._continue=function(t,e,s,i){return Tt(i,this.scheduler,At(e,t(s)))},t.prototype.dispose=function(){return this.disposable.dispose()},t}(),ws=function(t){return t instanceof bs||pt(t)?t:new bs(t)},bs=function(){function t(t){this.source=new ks(t)}return t.prototype.run=function(t,e){return this.source.run(t,e)},t}(),ks=function(){function t(t){this.source=t,this.sinks=[],this.disposable=R()}return t.prototype.run=function(t,e){return 1===this.add(t)&&(this.disposable=this.source.run(this,e)),z(new Ss(this,t))},t.prototype.dispose=function(){var t=this.disposable;return this.disposable=R(),t.dispose()},t.prototype.add=function(t){return this.sinks=o(t,this.sinks),this.sinks.length},t.prototype.remove=function(t){var e=l(t,this.sinks);return e>=0&&(this.sinks=function(t,e){if(t<0)throw new TypeError("i must be >= 0");var s=e.length;return 0===s||t>=s?e:1===s?[]:function(t,e,s){var i,n=new Array(s);for(i=0;i<t;++i)n[i]=e[i];for(i=t;i<s;++i)n[i]=e[i+1];return n}(t,e,s-1)}(e,this.sinks)),this.sinks.length},t.prototype.event=function(t,e){var s=this.sinks;if(1===s.length)return s[0].event(t,e);for(var i=0;i<s.length;++i)ms(t,e,s[i])},t.prototype.end=function(t){for(var e=this.sinks,s=0;s<e.length;++s)gs(t,e[s])},t.prototype.error=function(t,e){for(var s=this.sinks,i=0;i<s.length;++i)s[i].error(t,e)},t}(),Ss=function(){function t(t,e){this.source=t,this.sink=e}return t.prototype.dispose=function(){0===this.source.remove(this.sink)&&this.source.dispose()},t}(),Ts=(p(Tt),y(At),p((function(t,e,s){return pt(s)?yt():new Et(t,e,s)})),p((function(t,e,s){return new _t(t,e,s)}))),Bs=y((function(t,e){return Nt((function(){return e}),wt(t))})),As=y(Gt),Cs=(y((function(t,e){return Gt((function(){return t}),e)})),y((function(t,e){return new Vt(t,e)}))),Os=(y((function(t,e){return $t(d,t,e)})),y((function(t,e){return te(t,1/0,e)})),y(Nt),y((function(t,e){return te(t,1,e)})),y(Qt),p(te),y((function(t,e){return ae([t,e])}))),Ps=(p($t),y(Yt),y((function(t,e){return ye((function(t){return t}),t,e)})),p(ye)),Es=(p(Me),y((function(t,e){return Me(Ne,t,e)})),p((function(t,e,s){return Re(t,[e,s])})),y(Re),y((function(t,e){return It.create(t,e)}))),js=(y(Je),y(xe),y((function(t,e){return ve(t,1/0,e)})),p(ve),y((function(t,e){return pt(e)?yt():new Ce(t,e)})),y((function(t,e){return pt(e)?yt():new Pe(t,e)})),y((function(t,e){return pt(e)?yt():new je(t,e)}))),_s=y(Ze),Ms=(y(Qe),y((function(t,e){return Ze(re(t),Qe(t,e))})),y((function(t,e){return t<=0?e:new rs(t,e)}))),Ns=(y(os),y((function(t,e){return pt(e)?yt():new ds(t,e)}))),Ds=(y((function(t,e){return pt(e)?yt():new xs(t,e)})),p(nt),y(rt),y(ot),function(t,e,s,i,n){this.time=t,this.localOffset=e,this.period=s,this.task=i,this.scheduler=n,this.active=!0});Ds.prototype.run=function(){return this.task.run(this.time-this.localOffset)},Ds.prototype.error=function(t){return this.task.error(this.time-this.localOffset,t)},Ds.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()};var Fs=function(t,e){this.origin=t,this.scheduler=e};function Is(t){try{return t.run()}catch(e){return t.error(e)}}Fs.prototype.currentTime=function(){return this.scheduler.currentTime()-this.origin},Fs.prototype.scheduleTask=function(t,e,s,i){return this.scheduler.scheduleTask(t+this.origin,e,s,i)},Fs.prototype.relative=function(t){return new Fs(t+this.origin,this.scheduler)},Fs.prototype.cancel=function(t){return this.scheduler.cancel(t)},Fs.prototype.cancelAll=function(t){return this.scheduler.cancelAll(t)};var Rs=function(t,e){var s=this;this.timer=t,this.timeline=e,this._timer=null,this._nextArrival=1/0,this._runReadyTasksBound=function(){return s._runReadyTasks(s.currentTime())}};Rs.prototype.currentTime=function(){return this.timer.now()},Rs.prototype.scheduleTask=function(t,e,s,i){var n=this.currentTime()+Math.max(0,e),r=new Ds(n,t,s,i,this);return this.timeline.add(r),this._scheduleNextRun(),r},Rs.prototype.relative=function(t){return new Fs(t,this)},Rs.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},Rs.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},Rs.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.currentTime())},Rs.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},Rs.prototype._scheduleNextRun=function(){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t))}},Rs.prototype._scheduleNextArrival=function(t){this._nextArrival=t;var e=Math.max(0,t-this.currentTime());this._timer=this.timer.setTimer(this._runReadyTasksBound,e)},Rs.prototype._runReadyTasks=function(){this._timer=null,this.timeline.runTasks(this.currentTime(),Is),this._scheduleNextRun()};var Ls=function(){this.tasks=[]};function zs(t,e,s){for(var i=0;i<e.length;++i){var n=e[i];n.active&&(t(n),n.period>=0&&n.active&&(n.time=n.time+n.period,Hs(n,s)))}return s}function Hs(t,e){var s=e.length,i=Us(t);if(0!==s){var n=Gs(i,e);n>=s?e.push(Vs(i,[t])):function(t,e,s,i){var n=e[i];s===n.time?function(t,e){0===e.length||t.time>=e[e.length-1].time?e.push(t):function(t,e){for(var s=0;s<e.length;s++)if(t.time<e[s].time){e.splice(s,0,t);break}}(t,e)}(t,n.events):e.splice(i,0,Vs(s,[t]))}(t,e,i,n)}else e.push(Vs(i,[t]))}function Us(t){return Math.floor(t.time)}function qs(t,e){e.events=h(t,e.events)}function Gs(t,e){for(var s,i,n=0,r=e.length;n<r;){if(t===(i=e[s=Math.floor((n+r)/2)]).time)return s;t<i.time?r=s:n=s+1}return r}Ls.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},Ls.prototype.isEmpty=function(){return 0===this.tasks.length},Ls.prototype.add=function(t){Hs(t,this.tasks)},Ls.prototype.remove=function(t){var e=Gs(Us(t),this.tasks);if(e>=0&&e<this.tasks.length){var s=l(t,this.tasks[e].events);if(s>=0)return this.tasks[e].events.splice(s,1),!0}return!1},Ls.prototype.removeAll=function(t){for(var e=0;e<this.tasks.length;++e)qs(t,this.tasks[e])},Ls.prototype.runTasks=function(t,e){for(var s=this.tasks,i=s.length,n=0;n<i&&s[n].time<=t;)++n;this.tasks=s.slice(n);for(var r=0;r<n;++r)this.tasks=zs(e,s[r].events,this.tasks)};var Vs=function(t,e){return{time:t,events:e}},Ws=function(t){this._clock=t};Ws.prototype.now=function(){return this._clock.now()},Ws.prototype.setTimer=function(t,e){return e<=0?function(t){var e=new Ks(t);return function(t){Promise.resolve(t).then(Is)}(e),e}(t):setTimeout(t,e)},Ws.prototype.clearTimer=function(t){return t instanceof Ks?t.cancel():clearTimeout(t)};var Ks=function(t){this.f=t,this.active=!0};Ks.prototype.run=function(){return this.active&&this.f()},Ks.prototype.error=function(t){throw t},Ks.prototype.cancel=function(){this.active=!1};y((function(t,e){return e.scheduleTask(0,0,-1,t)})),p((function(t,e,s){return s.scheduleTask(0,t,-1,e)})),p((function(t,e,s){return s.scheduleTask(0,0,t,e)})),y((function(t,e){return e.cancelAll(t)})),y((function(t,e){return new Fs(t,e)})),y((function(t,e){return new Rs(t,e)}));var Js=function(t,e,s){return void 0===s&&(s=!1),new Xs(t,e,s)},$s=function(t,e){return void 0===e&&(e=!1),Js("resize",t,e)},Ys=function(t,e){return void 0===e&&(e=!1),Js("scroll",t,e)},Xs=function(t,e,s){this.event=t,this.node=e,this.capture=s};Xs.prototype.run=function(t,e){var s=this,i=function(s){return function(t,e,s){try{s.event(t,e)}catch(e){s.error(t,e)}}(e.currentTime(),s,t)};return this.node.addEventListener(this.event,i,this.capture),{dispose:function(){return s.node.removeEventListener(s.event,i,s.capture)}}};var Zs=function(){var t=[];return[function(e){return Qs(t,e)},new ti(t)]},Qs=function(t,e){return t.forEach((function(t){var s=t.sink;return function(t,e,s){try{s.event(t,e)}catch(e){s.error(t,e)}}(t.scheduler.currentTime(),e,s)}))},ti=function(){function t(t){this.sinks=t}return t.prototype.run=function(t,e){var s={sink:t,scheduler:e};return this.sinks.push(s),new ei(s,this.sinks)},t}(),ei=function(){function t(t,e){this.sink=t,this.sinks=e}return t.prototype.dispose=function(){var t=this.sinks.indexOf(this.sink);t>=0&&this.sinks.splice(t,1)},t}();function si(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function ii(t){return function e(s){return 0===arguments.length||si(s)?e:t.apply(this,arguments)}}function ni(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,s){return e.apply(this,arguments)};case 3:return function(t,s,i){return e.apply(this,arguments)};case 4:return function(t,s,i,n){return e.apply(this,arguments)};case 5:return function(t,s,i,n,r){return e.apply(this,arguments)};case 6:return function(t,s,i,n,r,a){return e.apply(this,arguments)};case 7:return function(t,s,i,n,r,a,o){return e.apply(this,arguments)};case 8:return function(t,s,i,n,r,a,o,c){return e.apply(this,arguments)};case 9:return function(t,s,i,n,r,a,o,c,h){return e.apply(this,arguments)};case 10:return function(t,s,i,n,r,a,o,c,h,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ri(t){return function e(s,i){switch(arguments.length){case 0:return e;case 1:return si(s)?e:ii((function(e){return t(s,e)}));default:return si(s)&&si(i)?e:si(s)?ii((function(e){return t(e,i)})):si(i)?ii((function(e){return t(s,e)})):t(s,i)}}}function ai(t,e,s){return function(){for(var i=[],n=0,r=t,a=0;a<e.length||n<arguments.length;){var o;a<e.length&&(!si(e[a])||n>=arguments.length)?o=e[a]:(o=arguments[n],n+=1),i[a]=o,si(o)||(r-=1),a+=1}return r<=0?s.apply(this,i):ni(r,ai(t,i,s))}}const oi=ri((function(t,e){return 1===t?ii(e):ni(t,ai(t,[],e))})),ci=ii((function(t){return oi(t.length,t)}));function hi(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function li(t){return function e(s,i,n){switch(arguments.length){case 0:return e;case 1:return si(s)?e:ri((function(e,i){return t(s,e,i)}));case 2:return si(s)&&si(i)?e:si(s)?ri((function(e,s){return t(e,i,s)})):si(i)?ri((function(e,i){return t(s,e,i)})):ii((function(e){return t(s,i,e)}));default:return si(s)&&si(i)&&si(n)?e:si(s)&&si(i)?ri((function(e,s){return t(e,s,n)})):si(s)&&si(n)?ri((function(e,s){return t(e,i,s)})):si(i)&&si(n)?ri((function(e,i){return t(s,e,i)})):si(s)?ii((function(e){return t(e,i,n)})):si(i)?ii((function(e){return t(s,e,n)})):si(n)?ii((function(e){return t(s,i,e)})):t(s,i,n)}}}const ui=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function di(t){return"[object String]"===Object.prototype.toString.call(t)}const yi=ii((function(t){return!!ui(t)||!!t&&"object"==typeof t&&!di(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1))}));var pi=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();const fi=ri((function(t,e){return ni(t.length,(function(){return t.apply(e,arguments)}))}));function mi(t,e,s){for(var i=s.next();!i.done;){if((e=t["@@transducer/step"](e,i.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i=s.next()}return t["@@transducer/result"](e)}function gi(t,e,s,i){return t["@@transducer/result"](s[i](fi(t["@@transducer/step"],t),e))}var xi="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function vi(t,e,s){if("function"==typeof t&&(t=function(t){return new pi(t)}(t)),yi(s))return function(t,e,s){for(var i=0,n=s.length;i<n;){if((e=t["@@transducer/step"](e,s[i]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i+=1}return t["@@transducer/result"](e)}(t,e,s);if("function"==typeof s["fantasy-land/reduce"])return gi(t,e,s,"fantasy-land/reduce");if(null!=s[xi])return mi(t,e,s[xi]());if("function"==typeof s.next)return mi(t,e,s);if("function"==typeof s.reduce)return gi(t,e,s,"reduce");throw new TypeError("reduce: list must be array or iterable")}const wi=li(vi);function bi(t,e){return function(){var s=arguments.length;if(0===s)return e();var i=arguments[s-1];return ui(i)||"function"!=typeof i[t]?e.apply(this,arguments):i[t].apply(i,Array.prototype.slice.call(arguments,0,s-1))}}const ki=ii(bi("tail",li(bi("slice",(function(t,e,s){return Array.prototype.slice.call(s,t,e)})))(1,1/0)));function Si(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return ni(arguments[0].length,wi(hi,arguments[0],ki(arguments)))}const Ti=ii((function(t){return di(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Bi(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Si.apply(this,Ti(arguments))}const Ai=ri((function(t,e){return e(t)})),Ci="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Oi=ri(Ci);function Pi(t){for(var e,s=[];!(e=t.next()).done;)s.push(e.value);return s}function Ei(t,e,s){for(var i=0,n=s.length;i<n;){if(t(e,s[i]))return!0;i+=1}return!1}function ji(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var _i=Object.prototype.toString;const Mi=function(){return"[object Arguments]"===_i.call(arguments)?function(t){return"[object Arguments]"===_i.call(t)}:function(t){return ji("callee",t)}}();var Ni=!{toString:null}.propertyIsEnumerable("toString"),Di=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Fi=function(){return arguments.propertyIsEnumerable("length")}(),Ii=function(t,e){for(var s=0;s<t.length;){if(t[s]===e)return!0;s+=1}return!1};const Ri="function"!=typeof Object.keys||Fi?ii((function(t){if(Object(t)!==t)return[];var e,s,i=[],n=Fi&&Mi(t);for(e in t)!ji(e,t)||n&&"length"===e||(i[i.length]=e);if(Ni)for(s=Di.length-1;s>=0;)ji(e=Di[s],t)&&!Ii(i,e)&&(i[i.length]=e),s-=1;return i})):ii((function(t){return Object(t)!==t?[]:Object.keys(t)})),Li=ii((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function zi(t,e,s,i){var n=Pi(t);function r(t,e){return Hi(t,e,s.slice(),i.slice())}return!Ei((function(t,e){return!Ei(r,e,t)}),Pi(e),n)}function Hi(t,e,s,i){if(Ci(t,e))return!0;var n,r,a=Li(t);if(a!==Li(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(n=t.constructor,null==(r=String(n).match(/^function (\w*)/))?"":r[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!Ci(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!Ci(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var o=s.length-1;o>=0;){if(s[o]===t)return i[o]===e;o-=1}switch(a){case"Map":return t.size===e.size&&zi(t.entries(),e.entries(),s.concat([t]),i.concat([e]));case"Set":return t.size===e.size&&zi(t.values(),e.values(),s.concat([t]),i.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Ri(t);if(c.length!==Ri(e).length)return!1;var h=s.concat([t]),l=i.concat([e]);for(o=c.length-1;o>=0;){var u=c[o];if(!ji(u,e)||!Hi(e[u],t[u],h,l))return!1;o-=1}return!0}const Ui=ri((function(t,e){return Hi(t,e,[],[])})),qi=li((function(t,e,s){var i={};for(var n in s)i[n]=s[n];return i[t]=e,i})),Gi=ii((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():ui(t)?[]:di(t)?"":function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)?{}:Mi(t)?function(){return arguments}():void 0})),Vi=ii((function(t){return null!=t&&Ui(t,Gi(t))}));function Wi(t,e){return function(t,e,s){var i,n;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(i=1/e;s<t.length;){if(0===(n=t[s])&&1/n===i)return s;s+=1}return-1}if(e!=e){for(;s<t.length;){if("number"==typeof(n=t[s])&&n!=n)return s;s+=1}return-1}return t.indexOf(e,s);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,s);case"object":if(null===e)return t.indexOf(e,s)}for(;s<t.length;){if(Ui(t[s],e))return s;s+=1}return-1}(e,t,0)>=0}function Ki(t,e,s){var i,n=typeof t;switch(n){case"string":case"number":return 0===t&&1/t==-1/0?!!s._items["-0"]||(e&&(s._items["-0"]=!0),!1):null!==s._nativeSet?e?(i=s._nativeSet.size,s._nativeSet.add(t),s._nativeSet.size===i):s._nativeSet.has(t):n in s._items?t in s._items[n]||(e&&(s._items[n][t]=!0),!1):(e&&(s._items[n]={},s._items[n][t]=!0),!1);case"boolean":if(n in s._items){var r=t?1:0;return!!s._items[n][r]||(e&&(s._items[n][r]=!0),!1)}return e&&(s._items[n]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==s._nativeSet?e?(i=s._nativeSet.size,s._nativeSet.add(t),s._nativeSet.size===i):s._nativeSet.has(t):n in s._items?!!Wi(t,s._items[n])||(e&&s._items[n].push(t),!1):(e&&(s._items[n]=[t]),!1);case"undefined":return!!s._items[n]||(e&&(s._items[n]=!0),!1);case"object":if(null===t)return!!s._items.null||(e&&(s._items.null=!0),!1);default:return(n=Object.prototype.toString.call(t))in s._items?!!Wi(t,s._items[n])||(e&&s._items[n].push(t),!1):(e&&(s._items[n]=[t]),!1)}}const Ji=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Ki(t,!0,this)},t.prototype.has=function(t){return Ki(t,!1,this)},t}(),$i=ri((function(t,e){for(var s=[],i=0,n=t.length,r=e.length,a=new Ji,o=0;o<r;o+=1)a.add(e[o]);for(;i<n;)a.add(t[i])&&(s[s.length]=t[i]),i+=1;return s})),Yi=li((function(t,e,s){return Ui(e,s[t])})),Xi=ii((function(t){return function(){return t}})),Zi="visualViewport"in window;function Qi(){return Zi}const tn=navigator.userAgent,en="ontouchend"in document,sn=/\b(\w*Macintosh\w*)\b/.test(tn)&&en,nn=/\b(\w*iPhone\w*)\b/.test(tn)&&/\b(\w*Mobile\w*)\b/.test(tn)&&en,rn=sn||nn,an=()=>screen.orientation.type.startsWith("portrait")?"portrait":"landscape",on=ci(Bi(re,Ps(((t,e)=>t?yt():wt(e)))));function cn(t){if(rn)return function(t){if(!Qi())return console.warn("On-Screen-Keyboard detection not supported on this version of iOS"),()=>{};const[e,s]=Zs(),i=F(),n=Si((()=>ae([Ys(visualViewport),$s(visualViewport),Ys(window)])),Ns(800),Cs((()=>{console.log(visualViewport.height*visualViewport.scale/document.documentElement.clientHeight)})),As((()=>visualViewport.height*visualViewport.scale/document.documentElement.clientHeight<.85)),Ke,As((t=>t?"visible":"hidden")),_s(s))();return kt(Cs(t,n),i),e}(t);const e=Math.max(700,700)-500+200,[s,i]=Zs(),n=F(),r=window.innerHeight,a=screen.availHeight-window.innerHeight,o=Os((f=document.documentElement,void 0===m&&(m=!1),Js("focusin",f,m)),function(t,e){return void 0===e&&(e=!1),Js("focusout",t,e)}(document.documentElement)),c=Ai(Js("visibilitychange",document))(Si(As((()=>document.visibilityState)),Bs(document.visibilityState))),h=Ai(o)(Si(As((t=>"focusin"===t.type?wt(!1):gt(700,!0))),qe,Bs(!(document.activeElement&&document.activeElement!==document.body)),Ke,ws)),l=Ai(function(t,e){return void 0===e&&(e=!1),Js("change",t,e)}(screen.orientation))(Si(Ps((t=>t||window.innerHeight===r),h),Ns(700),As((t=>({screenOrientation:an(),height:t?window.innerHeight:screen.availHeight-a}))))),u=Ai(h)(Si(Es(Oi(!0)),As((()=>({screenOrientation:an(),height:window.innerHeight}))))),d=Ai(ae([u,l]))(Si(Ms(1e3),on(As(Ui("hidden"),c)),Ts(((t,{screenOrientation:e,height:s})=>qi(e,s,t)),{[an()]:window.innerHeight}),js(Bi(Vi,$i(["portrait","landscape"]),Ri)))),y=Ai($s(window))(Si(Ns(500),As((t=>({width:t.target.innerWidth,height:t.target.innerHeight}))),Ts(((t,e)=>({...e,isJustHeightResize:t.width===e.width,dH:e.height-t.height})),{width:window.innerWidth,height:window.innerHeight,isJustHeightResize:!1,dH:0}),Es(Yi("isJustHeightResize",!0)))),p=Ai(y)(Si(Ms(e),Ps(((t,{height:e,dH:s})=>{const i=t[an()];return i?e<.9*i&&s<0?wt("visible"):e===i&&s>0?wt("hidden"):yt():s>.1*screen.availHeight?wt("hidden"):s<-.1*screen.availHeight?wt("visible"):yt()}),d),re,Os(Ai(h)(Si(Es(Oi(!0)),As(Xi("hidden"))))),_s(i),Ke));var f,m;return kt(Cs(t,p),n),s}const hn=JSON.parse('{"K":[{"x":598,"y":-19592,"scale":2.4138356027868304},{"x":14090,"y":15702,"scale":5.003553229816749},{"x":-16473,"y":6486,"scale":0.7377651175570159},{"x":7345,"y":11746,"scale":2.97678697138092},{"x":-14745,"y":19900,"scale":0.6394234480714137},{"x":-17556,"y":10404,"scale":2.7215010713884897},{"x":-19925,"y":1993,"scale":1.6257429089349713},{"x":-18304,"y":4180,"scale":3.337041012237669},{"x":4789,"y":5183,"scale":0.9451727781813929},{"x":12468,"y":1456,"scale":2.4648251108086647},{"x":-3524,"y":-5506,"scale":3.549301262034514},{"x":14003,"y":-15085,"scale":2.093953076156069},{"x":12325,"y":-13337,"scale":2.8189969763101272},{"x":-9981,"y":807,"scale":1.7916595164798987},{"x":-11676,"y":-951,"scale":0.6929366550672903},{"x":13417,"y":-6740,"scale":2.9425186122684677},{"x":-19003,"y":-10537,"scale":2.959651656009296},{"x":6818,"y":9556,"scale":1.8229545266350455},{"x":762,"y":6050,"scale":3.3159457999354656},{"x":17466,"y":2869,"scale":4.866507580774215},{"x":-12709,"y":-10324,"scale":4.535827293706099},{"x":-3956,"y":5435,"scale":3.390247415887782},{"x":-12737,"y":-6100,"scale":0.5401858167193904},{"x":14441,"y":12777,"scale":2.5236456747760716},{"x":-14984,"y":339,"scale":5.883991289712315},{"x":11912,"y":9228,"scale":1.3351010394227},{"x":-6874,"y":19066,"scale":3.528678685657431},{"x":-12459,"y":6186,"scale":5.798805844071342},{"x":14998,"y":-10426,"scale":0.5061007589968365},{"x":4662,"y":15760,"scale":0.5413555022628801},{"x":-3797,"y":3965,"scale":1.2725063860503265},{"x":18658,"y":-17123,"scale":5.448430248654273},{"x":-2687,"y":17125,"scale":0.7964844779733362},{"x":-719,"y":15053,"scale":5.744792686518959},{"x":4596,"y":-15803,"scale":5.448160362625103},{"x":5188,"y":12798,"scale":5.50257495235213},{"x":-8112,"y":14564,"scale":2.0348509078615953},{"x":575,"y":-11270,"scale":5.166297298340856},{"x":2116,"y":-19470,"scale":4.096021460633807},{"x":14339,"y":15615,"scale":1.5379881480049122},{"x":9579,"y":6482,"scale":5.675352324974524},{"x":12308,"y":7045,"scale":2.0157500270459696},{"x":-16324,"y":10862,"scale":0.6811040601537225},{"x":10756,"y":-122,"scale":4.888787754875325},{"x":3652,"y":-14043,"scale":4.8298873423136195},{"x":19679,"y":-13839,"scale":4.942635469075865},{"x":11985,"y":4059,"scale":5.583022116803327},{"x":-427,"y":12332,"scale":1.1551309507881722},{"x":-7341,"y":8203,"scale":1.2192084444914961},{"x":4927,"y":6375,"scale":5.8406228978651376},{"x":-4337,"y":5023,"scale":4.9200108894013095},{"x":19543,"y":14089,"scale":2.3794929876230557},{"x":-4082,"y":-4482,"scale":0.5008608871284835},{"x":12772,"y":-6330,"scale":3.2691024102922333},{"x":-7047,"y":-9465,"scale":1.868960260462163},{"x":12286,"y":-5666,"scale":2.0753078738668327},{"x":813,"y":674,"scale":0.600167766221264},{"x":-6961,"y":-16249,"scale":1.2595753357482573},{"x":11776,"y":-432,"scale":2.1335494375616717},{"x":18478,"y":14187,"scale":1.1994394371763248},{"x":-81,"y":-6625,"scale":2.1266620863737127},{"x":14285,"y":-13736,"scale":3.9408020724026223},{"x":12850,"y":7129,"scale":1.9742283550145867},{"x":9221,"y":-1975,"scale":4.372794290338155},{"x":17889,"y":6137,"scale":2.128023048144042},{"x":2469,"y":9099,"scale":5.565368804198714},{"x":16237,"y":1850,"scale":1.4053638585014772},{"x":-11758,"y":-17243,"scale":4.710393900216136},{"x":-19339,"y":-8527,"scale":1.2318426239809346},{"x":-13671,"y":-14095,"scale":4.654937551820023},{"x":14331,"y":17882,"scale":4.837095834569807},{"x":8594,"y":-3801,"scale":5.386221541411405},{"x":-9954,"y":-3729,"scale":1.1869277589353677},{"x":-15064,"y":19641,"scale":1.1237215377641676},{"x":17991,"y":12833,"scale":0.5997036467780705},{"x":18869,"y":8250,"scale":3.923938398392081},{"x":239,"y":-7454,"scale":3.5346485372832124},{"x":-7424,"y":2959,"scale":0.58107175274481},{"x":-8255,"y":-13398,"scale":2.715565698004778},{"x":-10416,"y":14139,"scale":4.650819637605722},{"x":15721,"y":15886,"scale":0.6911131395135847},{"x":-3288,"y":4253,"scale":2.641561406256173},{"x":-2494,"y":7318,"scale":2.7569311796920415},{"x":-1635,"y":15508,"scale":3.6906014737614172},{"x":1393,"y":7597,"scale":1.6532824394068486},{"x":-17374,"y":-1313,"scale":3.705402154495344},{"x":9452,"y":-12873,"scale":3.2157467777643136},{"x":3669,"y":5120,"scale":2.3044471328531393},{"x":-19211,"y":-12964,"scale":4.605894714158724},{"x":8509,"y":-3423,"scale":2.3733810774213655},{"x":-7515,"y":7544,"scale":4.632626697362539},{"x":1128,"y":-19199,"scale":4.227085473408062},{"x":3399,"y":19797,"scale":2.476483946211448},{"x":-8994,"y":-10932,"scale":2.1622710294758045},{"x":-11551,"y":-2353,"scale":5.107377959001238},{"x":-221,"y":8571,"scale":2.8652473180382665},{"x":-12372,"y":9752,"scale":4.334025479132649},{"x":5794,"y":1327,"scale":4.849610264951462},{"x":18720,"y":13478,"scale":4.02674429077853},{"x":-3491,"y":18133,"scale":3.7158683148342315},{"x":6575,"y":-8224,"scale":3.4091425173657406},{"x":-3904,"y":-13512,"scale":4.640130824439866},{"x":10137,"y":4,"scale":1.5302982790834543},{"x":-916,"y":-626,"scale":5.4819955762097},{"x":-9833,"y":-17746,"scale":4.07626259406681},{"x":-4855,"y":19899,"scale":5.479067157261107},{"x":-3870,"y":-5107,"scale":3.452272056878975},{"x":-14420,"y":17247,"scale":5.298145222395635},{"x":-13370,"y":15930,"scale":2.495955070082794},{"x":-10522,"y":10654,"scale":3.3324372946446568},{"x":-5704,"y":-18332,"scale":4.52838057688378},{"x":-836,"y":1987,"scale":5.201726551317106},{"x":12595,"y":-7565,"scale":2.165825071678606},{"x":-11849,"y":10616,"scale":4.107407596475419},{"x":-5805,"y":1275,"scale":5.946928443881281},{"x":5012,"y":801,"scale":3.2036889684635836},{"x":5950,"y":-16130,"scale":3.2855915265181244},{"x":-3332,"y":-19745,"scale":3.3171779499450484},{"x":-19514,"y":4141,"scale":1.626412956357191},{"x":16312,"y":6077,"scale":3.145718831119503},{"x":-17103,"y":14677,"scale":0.9670018198219816},{"x":-13259,"y":-4735,"scale":1.893647399066674},{"x":-8529,"y":11033,"scale":3.940316143969892},{"x":4897,"y":-9884,"scale":4.3309014267625585},{"x":-12679,"y":-17843,"scale":4.016896398544719},{"x":-3189,"y":12797,"scale":3.0226502358425007},{"x":17846,"y":1559,"scale":5.650303624823649},{"x":5349,"y":-9634,"scale":5.439852371003358},{"x":-8657,"y":18234,"scale":4.958969293158939},{"x":13148,"y":1318,"scale":2.4068248388218345},{"x":3208,"y":-17277,"scale":2.9190627067402977},{"x":19528,"y":-7554,"scale":3.118038934648127},{"x":-31,"y":-12696,"scale":5.180879048869581},{"x":6746,"y":-5798,"scale":1.7663394649232163},{"x":170,"y":5120,"scale":3.9013262527695045},{"x":-12219,"y":-4114,"scale":3.4153091968634186},{"x":-13508,"y":-14479,"scale":3.8825555155915845},{"x":7826,"y":13128,"scale":2.050815581478694},{"x":-6858,"y":9125,"scale":5.272504751543885},{"x":3228,"y":-11478,"scale":3.9931615013120947},{"x":16466,"y":-5647,"scale":5.58027273854164},{"x":18420,"y":10024,"scale":1.1026470539472888},{"x":13607,"y":19354,"scale":4.641550549438063},{"x":19508,"y":10533,"scale":4.1792586088101356},{"x":19409,"y":-13179,"scale":3.1935954296168623},{"x":8341,"y":-11668,"scale":5.44779320974021},{"x":3583,"y":16190,"scale":5.163974477988336},{"x":-12962,"y":7185,"scale":3.0892907187795053},{"x":9034,"y":9145,"scale":1.3934132359890783},{"x":-19634,"y":-5636,"scale":5.105222038949036},{"x":-1496,"y":-1299,"scale":0.9109201917495179},{"x":-1510,"y":7362,"scale":2.678837900391552},{"x":2456,"y":1946,"scale":5.1984559502241225},{"x":-2804,"y":-19361,"scale":3.4901577041601906},{"x":-16574,"y":-14610,"scale":3.310366916241604},{"x":-19520,"y":8585,"scale":3.454511499118286},{"x":9921,"y":-18193,"scale":5.426214367661431},{"x":10648,"y":13850,"scale":1.2434671919817228},{"x":15773,"y":13234,"scale":4.328600800361938},{"x":13034,"y":4677,"scale":3.256092839596322},{"x":8681,"y":11707,"scale":5.716362427046011},{"x":1220,"y":-14478,"scale":3.471324325335081},{"x":-17853,"y":-17852,"scale":2.3889520026979576},{"x":1296,"y":4492,"scale":4.6528073659267015},{"x":-3505,"y":16563,"scale":4.524014141761873},{"x":13712,"y":-12752,"scale":2.9351475171046344},{"x":-13750,"y":-7271,"scale":2.881756902750578},{"x":-19727,"y":-14770,"scale":1.1097832092661144},{"x":-1117,"y":-13963,"scale":1.2058185601809628},{"x":449,"y":-12343,"scale":0.9727753476749736},{"x":14408,"y":16194,"scale":2.6009668652211095},{"x":10756,"y":2826,"scale":5.483867324300925},{"x":-16567,"y":4363,"scale":1.1031895443143291},{"x":-17089,"y":-174,"scale":1.441930179369479},{"x":4705,"y":-4349,"scale":3.8107602675435333},{"x":2960,"y":-5351,"scale":0.6089074423957558},{"x":-1384,"y":-459,"scale":0.9887014166474876},{"x":17150,"y":1578,"scale":2.9056855052221735},{"x":2321,"y":-5830,"scale":1.5732175029188538},{"x":16472,"y":-5620,"scale":5.045622731772205},{"x":18399,"y":-10773,"scale":0.5740215683141813},{"x":9640,"y":19109,"scale":5.119142307643511},{"x":4732,"y":-6041,"scale":4.769316021872993},{"x":13820,"y":3325,"scale":1.8960261102575422},{"x":-13766,"y":1177,"scale":0.5901799834014204},{"x":13977,"y":-5159,"scale":5.1597663223760195},{"x":5829,"y":-14043,"scale":4.10987799556073},{"x":-1091,"y":-12759,"scale":0.9826832889974819},{"x":17884,"y":-15657,"scale":4.609370156385122},{"x":-8528,"y":-4393,"scale":2.1032835323735934},{"x":11487,"y":-10010,"scale":4.602873272816502},{"x":-6608,"y":-5309,"scale":5.130226937646574},{"x":15266,"y":-6058,"scale":5.529671522856676},{"x":13680,"y":-15405,"scale":1.9817934695713135},{"x":-12044,"y":7808,"scale":5.085108620863187},{"x":-4151,"y":-837,"scale":2.379412896848026},{"x":1279,"y":2341,"scale":4.508212631319005},{"x":-14406,"y":-3900,"scale":5.851206371618627},{"x":14157,"y":16631,"scale":4.940088863969503},{"x":13028,"y":-17052,"scale":2.678496902184698},{"x":17387,"y":2960,"scale":1.620191226131892},{"x":-10109,"y":-11668,"scale":3.8552882941758537},{"x":1385,"y":-12319,"scale":5.124129757958512},{"x":16802,"y":-19570,"scale":0.8456474371433667},{"x":-17444,"y":14973,"scale":1.3018756563465157},{"x":-7117,"y":18294,"scale":1.6840151076573329},{"x":-7827,"y":-10932,"scale":2.3365751795047465},{"x":-9244,"y":-8667,"scale":2.211559648511609},{"x":-19168,"y":6755,"scale":0.8566851738296033},{"x":1211,"y":12502,"scale":1.5242735251664852},{"x":-1660,"y":9083,"scale":4.067940743307123},{"x":-19500,"y":49,"scale":3.357441560895584},{"x":5527,"y":12524,"scale":0.8922264681837325},{"x":11803,"y":5022,"scale":2.5399564141075555},{"x":-14398,"y":-11069,"scale":2.045978963219208},{"x":1521,"y":7949,"scale":5.011376445316432},{"x":-10597,"y":10644,"scale":3.0469688256464744},{"x":16671,"y":-14995,"scale":1.8677065092479233},{"x":8120,"y":-16163,"scale":0.9844912387321954},{"x":8202,"y":7093,"scale":4.529642521504306},{"x":11732,"y":-820,"scale":5.26134310063679},{"x":-15723,"y":12091,"scale":5.281913898491471},{"x":-3382,"y":13083,"scale":2.8417010401263187},{"x":-5600,"y":9006,"scale":2.2686114251517413},{"x":-12335,"y":-388,"scale":2.781288901573367},{"x":-18899,"y":784,"scale":5.004828726870914},{"x":15801,"y":3195,"scale":2.6070626877121805},{"x":10596,"y":15421,"scale":3.6677387148680345},{"x":-8926,"y":-1962,"scale":2.4847938151607365},{"x":8482,"y":1493,"scale":3.880325018508713},{"x":11019,"y":15301,"scale":2.0039451829005994},{"x":-12606,"y":-12748,"scale":5.452081497773997},{"x":5774,"y":-14664,"scale":5.462831207048982},{"x":-9793,"y":1181,"scale":3.1424487879189873},{"x":-10226,"y":14173,"scale":2.309283902995242},{"x":-8477,"y":-13539,"scale":2.7306096144284107},{"x":3301,"y":18260,"scale":5.944395287513923},{"x":-9821,"y":-7154,"scale":4.6650883590135654},{"x":2423,"y":15026,"scale":4.1212185357342825},{"x":15678,"y":9410,"scale":0.8437659211136579},{"x":2341,"y":-8609,"scale":4.440292887379459},{"x":6892,"y":13654,"scale":1.8865691170513381},{"x":-10101,"y":16569,"scale":5.591846848730301},{"x":14322,"y":5381,"scale":2.0960863360803628},{"x":-3040,"y":18898,"scale":1.480887293000099},{"x":-1576,"y":213,"scale":4.770587454299935},{"x":16412,"y":-13398,"scale":4.458012539422294},{"x":-18461,"y":1596,"scale":3.166965722553263},{"x":-3192,"y":-2680,"scale":4.031533236816948},{"x":3736,"y":6100,"scale":3.8102405276973474},{"x":6040,"y":14736,"scale":4.295297837667201},{"x":-16227,"y":17789,"scale":2.8417827913289075},{"x":-7160,"y":2996,"scale":5.955362774010123},{"x":-7819,"y":6578,"scale":5.715954298339371},{"x":7855,"y":3795,"scale":5.440003033433091},{"x":4471,"y":-14231,"scale":3.3284166795677925},{"x":950,"y":-5248,"scale":3.5856017932911812},{"x":-12680,"y":-5314,"scale":1.2145091021311045},{"x":-7075,"y":6308,"scale":2.0536837386786644},{"x":11091,"y":-4949,"scale":4.795424293216417},{"x":-19578,"y":16034,"scale":4.992889898155511},{"x":3695,"y":1486,"scale":5.638792595674077},{"x":4535,"y":-15735,"scale":2.571336143542338},{"x":-11267,"y":102,"scale":1.2361306787952753},{"x":5018,"y":7501,"scale":2.1865728536408846},{"x":-7404,"y":13726,"scale":5.723955452508152},{"x":12133,"y":-3157,"scale":5.454434203591131},{"x":-5628,"y":-17817,"scale":1.8104140518301435},{"x":18290,"y":-5513,"scale":5.5058628190197965},{"x":12860,"y":6966,"scale":1.1905909825417176},{"x":-16138,"y":-14392,"scale":3.4246154256035135},{"x":798,"y":12956,"scale":1.1263941655062406},{"x":5456,"y":14629,"scale":2.356613860550934},{"x":237,"y":11317,"scale":4.522843625180568},{"x":-6647,"y":3171,"scale":5.314563418878154},{"x":7483,"y":-8257,"scale":4.919818865130955},{"x":725,"y":-14410,"scale":4.768813383792925},{"x":15353,"y":-3344,"scale":5.823274444842277},{"x":9713,"y":4697,"scale":4.711284268047666},{"x":17547,"y":-2963,"scale":0.9125950408789789},{"x":19510,"y":15836,"scale":2.707192687189454},{"x":13068,"y":-18153,"scale":3.9927972722031404},{"x":-16677,"y":-9288,"scale":1.0417201004064744},{"x":707,"y":-3951,"scale":0.5458640234634071},{"x":-885,"y":17809,"scale":3.773335507955791},{"x":15656,"y":6456,"scale":4.140448200685613},{"x":5933,"y":-18084,"scale":5.771016060866873},{"x":5165,"y":-1275,"scale":3.0267715463259757},{"x":-15715,"y":-12,"scale":1.0131351326742264},{"x":10921,"y":4350,"scale":2.019619646917108},{"x":12576,"y":-10348,"scale":3.0447311219115365},{"x":-6837,"y":3949,"scale":5.723639290292767},{"x":-6563,"y":4445,"scale":5.2075880049302175},{"x":16622,"y":-10034,"scale":1.5802906729876847},{"x":-19830,"y":475,"scale":0.5053340549261394},{"x":-4402,"y":2907,"scale":4.068541929230152},{"x":-2573,"y":7922,"scale":4.182224040400062},{"x":5007,"y":-15582,"scale":2.810208813687577},{"x":18850,"y":-11674,"scale":0.8702433974491677},{"x":5336,"y":-10937,"scale":2.544469449115806},{"x":-11172,"y":-970,"scale":1.3766326626722716},{"x":847,"y":-16036,"scale":0.8702321089009262},{"x":13986,"y":16795,"scale":1.7290540639861887},{"x":-14936,"y":-14586,"scale":2.29075184498756},{"x":-15033,"y":-2582,"scale":1.2130220831994092},{"x":-3554,"y":12914,"scale":5.583411321550936},{"x":-5213,"y":-13523,"scale":0.5335545591336507},{"x":-18432,"y":16520,"scale":5.720576628660548},{"x":635,"y":11540,"scale":4.071351119171395},{"x":-7505,"y":-17482,"scale":4.016334822124346},{"x":-16443,"y":6707,"scale":4.432412354840959},{"x":-11698,"y":-1553,"scale":2.306807279411114},{"x":-10205,"y":9399,"scale":3.526596940393887},{"x":-9529,"y":19490,"scale":1.126518308243552},{"x":5363,"y":-451,"scale":3.754666632545706},{"x":16212,"y":18191,"scale":4.060884167190747},{"x":12345,"y":421,"scale":5.228013828839966},{"x":-9706,"y":-18985,"scale":5.9797624904477775},{"x":8277,"y":419,"scale":1.1797712923814865},{"x":-9024,"y":-10362,"scale":2.9118735496971384},{"x":15048,"y":-11918,"scale":2.4971555557707874},{"x":19002,"y":-16456,"scale":1.0748433809258215},{"x":16319,"y":2849,"scale":4.26872498769032},{"x":12633,"y":14311,"scale":1.016904224614096},{"x":-11011,"y":5974,"scale":4.871469953269866},{"x":-16795,"y":-16504,"scale":4.0070374580792265},{"x":9022,"y":-18599,"scale":2.331635343896737},{"x":-5894,"y":10806,"scale":2.04382481055172},{"x":12118,"y":15916,"scale":3.487326444322753},{"x":8708,"y":12702,"scale":1.4388689589320225},{"x":17030,"y":-4731,"scale":2.5161709166730444},{"x":867,"y":-12875,"scale":4.003503112434835},{"x":1809,"y":18299,"scale":4.678594059857703},{"x":-3732,"y":18926,"scale":5.226933140655332},{"x":11540,"y":6300,"scale":4.17826674651196},{"x":13712,"y":-13754,"scale":4.927026490739016},{"x":-14406,"y":-893,"scale":0.9348247253969101},{"x":-6989,"y":-7339,"scale":1.1392218682627684},{"x":8638,"y":13212,"scale":4.125813348511315},{"x":-3104,"y":-17024,"scale":4.988403591695444},{"x":14253,"y":3477,"scale":2.048997356500804},{"x":4621,"y":19762,"scale":4.123530613254809},{"x":17743,"y":-10495,"scale":3.4310923203137103},{"x":-820,"y":18435,"scale":4.8846550516415075},{"x":7384,"y":4222,"scale":5.434865356804111},{"x":-4762,"y":8678,"scale":2.72718099555298},{"x":-5321,"y":2896,"scale":2.096885783776149},{"x":7254,"y":-6017,"scale":2.9867590487273254},{"x":2930,"y":-3829,"scale":1.0719486638867832},{"x":9453,"y":9957,"scale":5.894176584006824},{"x":-4848,"y":1345,"scale":1.5726988523228642},{"x":3882,"y":17253,"scale":4.0666506867034915},{"x":19975,"y":-19991,"scale":0.5695206443571891},{"x":5638,"y":11008,"scale":1.4970789711536223},{"x":16109,"y":-5348,"scale":3.6021745703245465},{"x":3316,"y":-9039,"scale":3.956487952698382},{"x":11617,"y":-7081,"scale":2.911517441430033},{"x":13402,"y":12852,"scale":3.6508811960334193},{"x":-10675,"y":-16199,"scale":2.2535817572485963},{"x":1512,"y":-17221,"scale":2.4806411526504926},{"x":-11209,"y":16023,"scale":5.772893719404527},{"x":6824,"y":-19502,"scale":2.8527093809810125},{"x":-11428,"y":-577,"scale":3.2702543731794385},{"x":3828,"y":-19340,"scale":2.5672547727843504},{"x":12466,"y":-6485,"scale":5.924454830450376},{"x":-9191,"y":18509,"scale":4.327120665525452},{"x":10920,"y":18928,"scale":2.2511696037542155},{"x":-4253,"y":-18076,"scale":3.7823538974511832},{"x":-12076,"y":-4755,"scale":5.680408535647461},{"x":-10629,"y":-17365,"scale":4.441299421628852},{"x":12728,"y":5274,"scale":2.8660035916681137},{"x":17957,"y":-2995,"scale":2.574267622488311},{"x":-17603,"y":-13193,"scale":2.2316476106741674},{"x":-10677,"y":-12923,"scale":1.5825711827807019},{"x":-5973,"y":-2764,"scale":1.6346868360390034},{"x":3095,"y":17784,"scale":5.771782667026274},{"x":5996,"y":3168,"scale":4.967834049857906},{"x":-17588,"y":8173,"scale":2.350293886030051},{"x":-11808,"y":-18695,"scale":1.5559136606144652},{"x":15172,"y":5175,"scale":0.6349062930745693},{"x":4859,"y":19750,"scale":5.9835029125815105},{"x":19185,"y":11535,"scale":0.8493454169811769},{"x":19928,"y":7528,"scale":3.2860737951492505},{"x":-12924,"y":-4734,"scale":3.242228699165991},{"x":-12639,"y":-3432,"scale":5.090613616618363},{"x":6088,"y":-567,"scale":4.1700938244316195},{"x":12372,"y":-5732,"scale":1.3279809170601773},{"x":-11611,"y":-4973,"scale":4.093044663995406},{"x":5612,"y":-8552,"scale":5.251139067780415},{"x":-6107,"y":-500,"scale":2.0172450686654133},{"x":17271,"y":19497,"scale":5.614386012509934},{"x":-1713,"y":5997,"scale":1.5200698275159927},{"x":16667,"y":-4147,"scale":2.1103884263154016},{"x":18968,"y":-14135,"scale":2.8167062326066814},{"x":16403,"y":-7740,"scale":5.06101417132729},{"x":9250,"y":-14670,"scale":2.5926435392241576},{"x":-17067,"y":-13972,"scale":0.8358679160855039},{"x":10075,"y":2628,"scale":5.8814856016678725},{"x":-4858,"y":5624,"scale":3.737901012853177},{"x":18415,"y":-9671,"scale":0.9175583765118281},{"x":-18295,"y":-11409,"scale":1.3443206653552737},{"x":-11613,"y":12361,"scale":3.4992722787181987},{"x":-19466,"y":10206,"scale":3.8468066374347476},{"x":737,"y":-17069,"scale":1.009880517450176},{"x":8004,"y":10132,"scale":2.731799653889024},{"x":-16127,"y":4551,"scale":4.1218607826597715},{"x":-6141,"y":-15437,"scale":1.1468577347171653},{"x":-10748,"y":-4541,"scale":2.6566582112884842},{"x":-3571,"y":5052,"scale":5.55624165939056},{"x":-11507,"y":-16116,"scale":5.886888928381593},{"x":17339,"y":-3287,"scale":4.269055000787373},{"x":1738,"y":5430,"scale":5.317354957009452},{"x":-17568,"y":-11028,"scale":1.5206619557786312},{"x":11203,"y":9988,"scale":3.284403963850084},{"x":-14359,"y":3114,"scale":4.370017299946342},{"x":-19459,"y":-14910,"scale":1.424384795540497},{"x":9002,"y":-7330,"scale":0.6455112242684019},{"x":-10564,"y":-14630,"scale":2.0877701506102992},{"x":18114,"y":993,"scale":5.314780082192302},{"x":8571,"y":-11057,"scale":5.556031365815013},{"x":6326,"y":-13795,"scale":5.851310438385957},{"x":-4627,"y":-205,"scale":3.4838186772851394},{"x":3737,"y":10640,"scale":5.960912494099761},{"x":-19612,"y":-6787,"scale":2.6586782439862},{"x":13041,"y":-19168,"scale":4.554669235989248},{"x":-2902,"y":5874,"scale":3.7806881338197957},{"x":-4386,"y":-5621,"scale":2.401942479662984},{"x":-7069,"y":8632,"scale":3.0043797045358787},{"x":-12750,"y":-3613,"scale":5.338495684014853},{"x":-2414,"y":9431,"scale":0.8821900785567445},{"x":-14068,"y":-9331,"scale":5.89589611546758},{"x":7916,"y":-4738,"scale":5.723638557277401},{"x":12681,"y":-661,"scale":2.861485931420791},{"x":-7832,"y":-1213,"scale":4.454529112534023},{"x":16158,"y":-2153,"scale":0.5066519622530977},{"x":2728,"y":6227,"scale":2.5686639984704738},{"x":-7608,"y":-4494,"scale":4.954814062192947},{"x":1009,"y":-1166,"scale":1.5624621461969164},{"x":-12098,"y":11527,"scale":5.756938379192453},{"x":-3530,"y":3266,"scale":5.632398774312219},{"x":3611,"y":3992,"scale":4.791413286006778},{"x":-15406,"y":11548,"scale":4.270197351335119},{"x":-9063,"y":-17412,"scale":0.7105947125331614},{"x":16238,"y":-18605,"scale":5.967075213771513},{"x":10484,"y":-7031,"scale":1.4829158876893727},{"x":-411,"y":14168,"scale":0.632109520048422},{"x":6452,"y":1195,"scale":1.733963609325234},{"x":-10461,"y":-4399,"scale":2.5829472941533362},{"x":2651,"y":4123,"scale":4.984578631770153},{"x":-19787,"y":-15834,"scale":2.5620549872041662},{"x":228,"y":2315,"scale":0.5780087421201765},{"x":18144,"y":2231,"scale":1.6152626971184514},{"x":9438,"y":-18179,"scale":3.5472441611035084},{"x":5754,"y":372,"scale":3.0817293563458144},{"x":-19612,"y":-11071,"scale":2.9473936086763173},{"x":-12894,"y":3149,"scale":2.55781137393053},{"x":-9955,"y":15703,"scale":5.759134321230015},{"x":-11151,"y":-3170,"scale":5.238470802925552},{"x":-5333,"y":-10667,"scale":2.407849770401628},{"x":-4370,"y":3873,"scale":1.133099239979999},{"x":-1959,"y":141,"scale":1.335403631420948},{"x":-16697,"y":8505,"scale":2.9961960467972415},{"x":-10251,"y":-2760,"scale":0.5595877507327376},{"x":14471,"y":-981,"scale":5.289435167247069},{"x":-5176,"y":8679,"scale":1.1504668364896997},{"x":-6399,"y":-13080,"scale":5.388826701971078},{"x":4104,"y":-19140,"scale":3.3929956013736433},{"x":-16623,"y":-7180,"scale":1.3536140401487364},{"x":-9194,"y":-6995,"scale":2.6145491602923316},{"x":-6670,"y":-16621,"scale":3.9417375596904294},{"x":-15340,"y":-15995,"scale":0.7114055506176286},{"x":-11269,"y":13136,"scale":0.603133853433013},{"x":4223,"y":-19386,"scale":4.485579814670997},{"x":-6533,"y":-2170,"scale":4.629839944872183},{"x":19966,"y":9579,"scale":5.292949543765543},{"x":10916,"y":11718,"scale":3.396524603827827},{"x":-12785,"y":-14647,"scale":2.3526171375161082},{"x":96,"y":17666,"scale":1.525959137255068},{"x":-2018,"y":-19783,"scale":0.6767540130342188},{"x":18067,"y":-15005,"scale":4.585670324736773},{"x":-11107,"y":19046,"scale":5.124118384970568},{"x":-7902,"y":-3336,"scale":3.730117358577782},{"x":-15441,"y":-18754,"scale":1.1747371104328113},{"x":18560,"y":5139,"scale":2.20557344475431},{"x":-13104,"y":-7963,"scale":0.69500532617285},{"x":-5425,"y":4269,"scale":2.5466631405746103},{"x":-13043,"y":12623,"scale":2.963110395734523},{"x":6363,"y":16386,"scale":4.786382307954269},{"x":15710,"y":14064,"scale":4.667922197372704},{"x":8177,"y":-1227,"scale":3.707729270125739},{"x":-16349,"y":-13961,"scale":4.768592837834071},{"x":-10519,"y":463,"scale":3.23583252997051},{"x":8206,"y":17717,"scale":1.722719453192706},{"x":16739,"y":6138,"scale":2.891910345207429},{"x":-9253,"y":18910,"scale":2.4633471317494022},{"x":2611,"y":11329,"scale":4.307301581611894},{"x":14631,"y":-7833,"scale":1.2876977187393917},{"x":-7163,"y":-16487,"scale":0.7063899840115226},{"x":11486,"y":6420,"scale":2.2382406642113257},{"x":-7062,"y":-14579,"scale":1.4253848748601896},{"x":8299,"y":16139,"scale":2.9433048691643977},{"x":7497,"y":26,"scale":1.5800239605558537},{"x":-6260,"y":-16726,"scale":5.0594623383309125},{"x":3693,"y":-9997,"scale":1.2264594191507836},{"x":-12838,"y":4886,"scale":1.6508673310793904},{"x":-10776,"y":-19351,"scale":3.659560108114596},{"x":6029,"y":-8285,"scale":2.858732674758531},{"x":-6103,"y":12467,"scale":4.210563752590293},{"x":-16734,"y":7037,"scale":2.1166460773779776},{"x":-10954,"y":7775,"scale":1.7090217220061956},{"x":-16639,"y":-5819,"scale":2.2079861766259516},{"x":6371,"y":-3182,"scale":3.6859780398702893},{"x":-3166,"y":-12708,"scale":5.910795879290557},{"x":-8255,"y":-5567,"scale":4.458830268896814},{"x":-15826,"y":-19288,"scale":4.686707168343882},{"x":9024,"y":-6898,"scale":3.8896095842480163},{"x":522,"y":13727,"scale":3.7967237145429267},{"x":-3151,"y":13174,"scale":3.9046290192612036},{"x":-18695,"y":4458,"scale":3.572118170449798},{"x":-10158,"y":-674,"scale":1.9757952142162485},{"x":116,"y":-8843,"scale":1.751262242207471},{"x":-10396,"y":16126,"scale":3.811032281272749},{"x":12466,"y":743,"scale":3.8521531366396595},{"x":818,"y":12237,"scale":4.419559590568149},{"x":-4588,"y":17705,"scale":3.7244671736213806},{"x":15864,"y":-5121,"scale":2.833601784775144},{"x":7854,"y":-7834,"scale":4.586834718049674},{"x":10034,"y":5026,"scale":2.757162832612341},{"x":10694,"y":11760,"scale":4.144486198251691},{"x":6756,"y":-7961,"scale":4.9503459790430195},{"x":11973,"y":-14849,"scale":0.6171372544155272},{"x":4383,"y":145,"scale":4.718548197287287},{"x":-10402,"y":7170,"scale":1.1134163746914778},{"x":14286,"y":16549,"scale":2.142815549286061},{"x":-13451,"y":3122,"scale":1.3087073482748068},{"x":-18026,"y":-8151,"scale":5.440429746070325},{"x":4957,"y":343,"scale":1.0956472317081922},{"x":14684,"y":-15895,"scale":5.166363973191384},{"x":7724,"y":17843,"scale":4.6251413014381475},{"x":-7357,"y":13921,"scale":4.128894473408576},{"x":-4654,"y":-13160,"scale":5.855725741008722},{"x":-10799,"y":17522,"scale":3.418233055596633},{"x":-18009,"y":-1480,"scale":3.3155788605302576},{"x":-834,"y":2137,"scale":5.185180541132774},{"x":-4798,"y":-18752,"scale":4.341125257661476},{"x":13377,"y":-17132,"scale":5.043165140694194},{"x":-4127,"y":-16978,"scale":5.021447067077765},{"x":-19230,"y":11878,"scale":4.105863617643616},{"x":-9010,"y":-6018,"scale":5.110401968262506},{"x":5873,"y":-19491,"scale":4.8707238861972435},{"x":8295,"y":-17257,"scale":4.08105546801025},{"x":-1331,"y":10925,"scale":5.779317203631492},{"x":-7497,"y":19024,"scale":5.090947290054565},{"x":512,"y":-9263,"scale":5.714072006238484},{"x":18172,"y":1770,"scale":5.6176162002668395},{"x":1895,"y":-6015,"scale":4.23080123408678},{"x":4777,"y":-18148,"scale":5.799321191996911},{"x":6602,"y":-19013,"scale":3.828244409682814},{"x":3347,"y":6781,"scale":1.6200219057633523},{"x":4245,"y":-624,"scale":3.4368470785106973},{"x":-12298,"y":-16530,"scale":5.064363565649386},{"x":-3196,"y":-5613,"scale":4.481501289341969},{"x":11260,"y":1732,"scale":1.4485674369433612},{"x":-10102,"y":-18507,"scale":4.016582395005357},{"x":13444,"y":370,"scale":1.348747192453216},{"x":10467,"y":-9539,"scale":4.5476759431219484},{"x":8497,"y":13672,"scale":5.007485663774532},{"x":6419,"y":13120,"scale":1.1541446638737742},{"x":5294,"y":-15814,"scale":2.173229432376626},{"x":-13052,"y":-5416,"scale":3.51726108101185},{"x":-9589,"y":-15356,"scale":3.1372169629436106},{"x":18658,"y":-18716,"scale":2.555389220547256},{"x":-1747,"y":1356,"scale":1.4299655704148775},{"x":9731,"y":-6288,"scale":4.771980704858326},{"x":-11025,"y":-3627,"scale":4.903587207751345},{"x":-13587,"y":-10863,"scale":0.8394358894217743},{"x":-18047,"y":-6372,"scale":2.5217591668448684},{"x":19302,"y":1847,"scale":3.2989469409936714},{"x":10365,"y":3635,"scale":5.575902400224232},{"x":1045,"y":-15767,"scale":2.657991631807576},{"x":3947,"y":-14538,"scale":3.061233984680251},{"x":-4767,"y":-5322,"scale":3.8564835730412277},{"x":-12610,"y":3610,"scale":2.8299478361291506},{"x":-197,"y":212,"scale":3.538190419813354},{"x":2746,"y":160,"scale":1.406911821344739},{"x":17995,"y":-772,"scale":0.6605686640965289},{"x":10375,"y":3960,"scale":4.774373458657002},{"x":-19316,"y":-2208,"scale":1.7215181783209306},{"x":-5389,"y":-8099,"scale":5.107900654437092},{"x":-8158,"y":-8718,"scale":4.367330247509749},{"x":-14768,"y":-7184,"scale":3.149337908688327},{"x":-12987,"y":-19149,"scale":3.0973941385719295},{"x":-13485,"y":-11853,"scale":5.070667543621138},{"x":-5957,"y":8146,"scale":5.924468383881791},{"x":-14337,"y":-757,"scale":0.551567853398707},{"x":-5516,"y":15454,"scale":1.5183091305984497},{"x":5800,"y":-14163,"scale":3.7928077026893705},{"x":14271,"y":-15502,"scale":0.7088237303078367},{"x":17226,"y":-2707,"scale":4.949342931389714},{"x":-9764,"y":18963,"scale":2.9068065065155793},{"x":3584,"y":15985,"scale":2.9357038191247806},{"x":3157,"y":-9192,"scale":4.4374755262419034},{"x":-3155,"y":4495,"scale":5.416267326699874},{"x":-12144,"y":13918,"scale":1.4016728618627077},{"x":-16608,"y":-13892,"scale":3.069684980745669},{"x":16332,"y":-1300,"scale":1.7683836849104613},{"x":10396,"y":-8270,"scale":1.8598037871890498},{"x":14679,"y":-5470,"scale":3.228297948690545},{"x":2150,"y":1438,"scale":2.4216965447652474},{"x":-7900,"y":-869,"scale":4.463413188767721},{"x":18122,"y":-16599,"scale":3.8749380881921986},{"x":-18626,"y":-8520,"scale":4.333563058288942},{"x":10783,"y":-15222,"scale":2.482258488922847},{"x":8584,"y":16633,"scale":1.32980610386611},{"x":-19740,"y":11089,"scale":1.2986452419996013},{"x":13219,"y":9173,"scale":3.4185816081213884},{"x":-3097,"y":-18991,"scale":4.796546963523331},{"x":-19473,"y":-18468,"scale":2.62432095300427},{"x":12713,"y":9167,"scale":3.0787070194344643},{"x":11027,"y":-16765,"scale":4.230513422469842},{"x":9482,"y":-2190,"scale":1.301549790692115},{"x":7821,"y":17580,"scale":3.7839582193859997},{"x":2194,"y":-10374,"scale":3.8560767797852193},{"x":2425,"y":15949,"scale":3.590399557119546},{"x":-9409,"y":-10888,"scale":0.5357024767604871},{"x":-19969,"y":-4799,"scale":3.213961561914515},{"x":-19552,"y":-8756,"scale":3.157392721779571},{"x":17786,"y":-1409,"scale":1.086488170615535},{"x":-1780,"y":-18675,"scale":3.6109430878215907},{"x":-7132,"y":14143,"scale":4.4539853392774145},{"x":11287,"y":2085,"scale":4.001875695632532},{"x":-6058,"y":-3044,"scale":2.3475496253840094},{"x":16139,"y":-2873,"scale":1.8378545498025254},{"x":5449,"y":2810,"scale":1.2616148415204507},{"x":3339,"y":-3527,"scale":1.0566496775267793},{"x":-5211,"y":9568,"scale":4.079404709700101},{"x":-18955,"y":9740,"scale":5.444273654941439},{"x":13651,"y":-593,"scale":5.140808222246941},{"x":15309,"y":9784,"scale":3.732833125696675},{"x":-10931,"y":8879,"scale":2.318908465761146},{"x":-19907,"y":4987,"scale":5.031079669802569},{"x":6196,"y":3826,"scale":2.1541660396725404},{"x":-10729,"y":-12571,"scale":5.5080026927364125},{"x":-18828,"y":16687,"scale":2.228378720985093},{"x":2254,"y":-7434,"scale":2.054645506196558},{"x":-17641,"y":-8788,"scale":4.837587985592302},{"x":18735,"y":-6677,"scale":3.344636777989261},{"x":6053,"y":-9211,"scale":5.345458930471164},{"x":-19934,"y":17911,"scale":3.5438133164176855},{"x":-8663,"y":-6207,"scale":4.4595331097262685},{"x":11107,"y":-16721,"scale":5.551080432352634},{"x":-3871,"y":-16640,"scale":2.6718200455605574},{"x":-2689,"y":11191,"scale":2.4973000618533057},{"x":5831,"y":-14226,"scale":5.956878146132853},{"x":-324,"y":12984,"scale":0.7939307700447196},{"x":15062,"y":8003,"scale":4.6258953411173},{"x":19169,"y":-864,"scale":2.36290658781093},{"x":18354,"y":18811,"scale":2.9061446935187467},{"x":-9452,"y":-5380,"scale":1.5449453596329206},{"x":14064,"y":-3304,"scale":5.369951638183707},{"x":-3778,"y":18265,"scale":5.524000244278215},{"x":-14418,"y":11321,"scale":5.392158571171809},{"x":7707,"y":18325,"scale":2.7624750106839455},{"x":16368,"y":-8617,"scale":3.473268319732451},{"x":9786,"y":5561,"scale":2.8841496095751555},{"x":-3315,"y":-11332,"scale":1.1424523451542687},{"x":19726,"y":-7921,"scale":1.322098994898677},{"x":-11131,"y":9924,"scale":4.15695112666031},{"x":-7842,"y":-19677,"scale":0.8719576634644558},{"x":8975,"y":11949,"scale":1.271279319261291},{"x":9609,"y":7415,"scale":5.429958560096701},{"x":-14689,"y":14146,"scale":3.815250168898458},{"x":-17615,"y":-19200,"scale":4.886146994154139},{"x":-3310,"y":12150,"scale":5.7242851626162246},{"x":-3789,"y":-16477,"scale":0.8529890283191788},{"x":-16929,"y":-15989,"scale":1.251840457913787},{"x":17576,"y":-6465,"scale":0.5774262613709296},{"x":19586,"y":-179,"scale":2.567117022527054},{"x":14675,"y":-14161,"scale":3.748078095643018},{"x":13014,"y":10623,"scale":1.9464878204525},{"x":5624,"y":18021,"scale":2.415128017046083},{"x":11282,"y":-15214,"scale":1.209834732968226},{"x":-11197,"y":-9666,"scale":3.515449841169664},{"x":-701,"y":-11081,"scale":3.3600508912716736},{"x":9760,"y":9314,"scale":2.594636995890979},{"x":-14380,"y":8696,"scale":0.6391819882195172},{"x":10553,"y":4476,"scale":4.660317707781421},{"x":10907,"y":-16409,"scale":1.429622750026312},{"x":7380,"y":690,"scale":3.3515168761437524},{"x":11139,"y":963,"scale":1.0322335274174228},{"x":4964,"y":-1429,"scale":1.5465377183265625},{"x":-13069,"y":3350,"scale":3.589670679475205},{"x":2610,"y":-15663,"scale":4.733831725637545},{"x":-17046,"y":-501,"scale":3.1618162951272986},{"x":-19259,"y":5299,"scale":0.8493844736244947},{"x":-8408,"y":-19062,"scale":1.8216198018571765},{"x":-17925,"y":-17212,"scale":5.772219541898332},{"x":-6329,"y":6494,"scale":2.3059297408188475},{"x":2539,"y":5924,"scale":3.7543967360196913},{"x":-11063,"y":9129,"scale":2.139483624531939}]}');class ln extends Phaser.Scene{constructor(t){super(),this.callback=t}preload(){window.onbeforeunload=function(t){return t.preventDefault(),"You are in game.. Do you really want to leave?"};try{document.getElementsByClassName("grecaptcha-badge")[0].style.opacity=0}catch(t){console.log(t)}this.ready=!1,this.loadrect=this.add.image(0,0,"opening").setOrigin(0).setScrollFactor(0,0).setScale(2).setDepth(200);const t=this.cameras.main.width,e=this.cameras.main.height;this.loadrect.setScale(Math.max(t/this.loadrect.width,e/this.loadrect.height)),this.loadrect.x=0-(this.loadrect.displayWidth-t)/2,this.loadtext=this.add.text(this.canvas.width/2,this.canvas.height/2,"Connecting...",{fontFamily:"Arial",fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0,0).setDepth(200),this.ping=0}create(){this.levels=[],grecaptcha.ready((()=>{grecaptcha.execute("6LdVxgYdAAAAAPtvjrXLAzSd2ANyzIkiSqk_yFpt",{action:"join"}).then((e=>{this.readyt=!0,this.openingBgm.stop();var s={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0};"normal"==this.options.sound?s.volume=.5:"high"==this.options.sound?s.volume=1:"low"==this.options.sound?s.volume=.2:"off"==this.options.sound?s.volume=0:s.volume=.5,this.coin=this.sound.add("coin",s),this.chestOpen=this.sound.add("chestOpen",s),this.damage=this.sound.add("damage",s),this.hit=this.sound.add("hit",s),this.winSound=this.sound.add("winSound",s),this.loseSound=this.sound.add("loseSound",s),this.tps=0,this.background=this.add.tileSprite(0,0,this.canvas.width,this.canvas.height,"background").setOrigin(0).setDepth(2),this.background.fixedToCamera=!0,this.meSword=this.add.image(400,100,"sword").setScale(.25).setDepth(50).setAlpha(.5),this.mePlayer=this.add.image(400,100,"player").setScale(.25).setDepth(51).setAlpha(.5),this.meChat=this.add.text(0,0,"",{fontFamily:"Georgia"}).setOrigin(.5).setDepth(71),this.meChatTween=void 0,this.swordAnim={go:!1,added:0},this.myObj=void 0;try{this.killCount=this.add.rexBBCodeText(15,10,"Stabs: 0",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'}).setFontSize(40).setDepth(101),this.killCount.addImage("coin",{key:"coin",width:45,height:45}),this.killCount.addImage("kill",{key:"kill",width:45,height:45}),this.killCount.setScrollFactor(0),this.playerCount=this.add.text(0,0,"Players: 0"+(this.mobile?"":"\nFPS: 0\nTPS: 0\nPing: 0 ms"),{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif',align:"right"}).setFontSize(20).setDepth(101).setOrigin(1),this.playerCount.setScrollFactor(1),this.leaderboard=this.add.rexBBCodeText(0,10,"",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'}).setFontSize(20).setDepth(101),this.leaderboard.setScrollFactor(0)}catch(t){console.log(t)}const i=(t,e,s)=>s*e/t;this.miniMap={people:[],scaleFactor:i(1189,96,this.canvas.width),square:void 0},this.miniGraphics=this.add.graphics().setDepth(100);var n=13;this.miniMap.scaleFactor=i(1189,96,this.canvas.width),this.miniGraphics.x=this.canvas.width-(2*this.miniMap.scaleFactor+n),this.miniGraphics.y=this.canvas.height-(2*this.miniMap.scaleFactor+n),this.miniGraphics.lineStyle(5,16776960,1),this.miniGraphics.strokeRoundedRect(0,0,2*this.miniMap.scaleFactor,2*this.miniMap.scaleFactor,0),this.cameras.main.ignore(this.miniGraphics),this.mobile&&"keys"==this.options.movementMode&&(this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:this.canvas.width/6,y:this.canvas.height-this.canvas.height/2.5,radius:i(2360,250,this.canvas.width),base:this.add.circle(0,0,i(2360,250,this.canvas.width),8947848),thumb:this.add.circle(0,0,i(2360,100,this.canvas.width),13421772)}),this.cameras.main.ignore(this.joyStick.base),this.cameras.main.ignore(this.joyStick.thumb)),this.meBar=new a(this,0,0,16,80),this.meBar.bar.setAlpha(.5),this.meBar.bar.setDepth(71),this.lvlBar=new a(this,0,0,0,0,!0),n=this.canvas.width/2,this.lvlBar.x=n/2,this.lastKill=Date.now(),this.streak=0,this.killtxts=[],this.lvlBar.width=this.canvas.width-n,this.lvlBar.height=this.canvas.height/30,this.lvlBar.y=this.canvas.height-this.lvlBar.height-this.canvas.height/40,this.lvlBar.draw(),this.chat={obj:null,toggled:!1,btn:new t(this,0,0,"chatbtn",(()=>{if(!this.loadtext.visible&&(this.chat.toggled=!this.chat.toggled,this.spectating&&this.deadText.visible&&(this.callback(),this.socket.disconnect(),this.scene.start("title")),!this.spectating))if(this.chat.toggled){if(this.chat.obj=this.add.dom(this.canvas.width/2,this.canvas.height/2-this.canvas.height/5).createFromCache("chat"),this.chat.obj.getChildByID("chat").focus(),rn?Qi():en){const t=cn((e=>{"hidden"===e&&(this.chat.toggled=!1,this.chat.obj.destroy(),t())}))}}else if(this.chat.obj){var t=this.chat.obj.getChildByID("chat").value.trim();t.length>0&&this.socket.emit("chat",t),this.chat.obj.destroy()}}))},this.chat.btn.btn.setScale(Math.min(this.canvas.height/1e3,this.canvas.width/1500)),this.chat.btn.btn.x=this.killCount.width,this.mobile?this.cameras.main.ignore(this.chat.btn.btn):this.chat.btn.destroy(),this.coins=[],this.chests=[],this.enemies=[],this.dead=!1,this.spectating=!1;var r=Phaser.Input.Keyboard.KeyCodes;this.cursors=this.input.keyboard.addKeys({up:r.UP,down:r.DOWN,left:r.LEFT,right:r.RIGHT,enter:r.ENTER,esc:r.ESC},!1),this.cursors.esc.on("down",(()=>{this.chat.toggled&&(this.chat.obj.destroy(),this.chat.toggled=!1)})),this.cursors.enter.on("down",(()=>{if(!this.loadtext.visible&&(this.chat.toggled=!this.chat.toggled,this.spectating&&this.deadText.visible&&(this.callback(),this.socket.disconnect(),this.scene.start("title")),!this.spectating))if(this.chat.toggled)this.chat.obj=this.add.dom(this.canvas.width/2,this.canvas.height/2-this.canvas.height/5).createFromCache("chat"),this.chat.obj.getChildByID("chat").focus();else if(this.chat.obj){var t=this.chat.obj.getChildByID("chat").value.trim();t.length>0&&this.socket.emit("chat",t),this.chat.obj.destroy()}}));try{this.lvlText=this.add.text(this.canvas.width/2,this.canvas.height/5,"",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'}).setFontSize(i(1366,75,this.canvas.width)).setDepth(75).setAlpha(0).setOrigin(.5),this.lvlTextTween=void 0,this.lvlState=this.add.text(this.canvas.width/2,this.lvlBar.y-this.lvlBar.height,"",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'}).setFontSize(i(1366,50,this.canvas.width)).setDepth(75).setAlpha(1).setOrigin(.5),this.lvlState.y=this.lvlBar.y-this.lvlState.height/2}catch(t){console.log(t)}this.cameras.main.setZoom(1),this.UICam=this.cameras.add(this.cameras.main.x,this.cameras.main.y,this.canvas.width,this.canvas.height),this.cameras.main.ignore([this.killCount,this.playerCount,this.leaderboard,this.lvlBar.bar,this.lvlText,this.lvlState]),this.UICam.ignore([this.mePlayer,this.meBar.bar,this.meSword,this.background,this.meChat]),this.cameras.main.startFollow(this.mePlayer,!0),this.bushes=[],hn.K.forEach(((t,e)=>{e%2!=0&&(this.bushes.push(this.add.image(t.x,t.y,"bush").setScale(t.scale).setDepth(70)),this.UICam.ignore(this.bushes[this.bushes.length-1]))})),this.input.addPointer(3);const o=()=>{if(this.scene.isActive("game"))try{this.game.scale.resize(this.canvas.width,this.canvas.height),this.lvlText.y=this.canvas.height/5,this.lvlText.x=this.canvas.width/2,this.mobile&&"keys"==this.options.movementMode&&(this.joyStick.x=this.canvas.width/8,this.joyStick.y=this.canvas.height-this.canvas.height/2.5,this.joyStick.base.radius=i(2360,250,this.canvas.width),this.joyStick.thumb.radius=i(2360,100,this.canvas.width),this.joyStick.radius=i(2360,250,this.canvas.width)),this.UICam.x=this.cameras.main.x,this.UICam.y=this.cameras.main.y,this.chat.btn.btn.setScale(Math.min(this.canvas.height/1e3,this.canvas.width/1500)),this.chat.btn.btn.x=this.killCount.width,this.miniGraphics.clear();var e=13;if(this.miniMap.scaleFactor=i(1189,96,this.canvas.width),this.miniGraphics.x=this.canvas.width-(2*this.miniMap.scaleFactor+e),this.miniGraphics.y=this.canvas.height-(2*this.miniMap.scaleFactor+e),this.miniGraphics.lineStyle(5,16776960,1),this.miniGraphics.strokeRoundedRect(0,0,2*this.miniMap.scaleFactor,2*this.miniMap.scaleFactor,0),this.background.width=this.canvas.width,this.background.height=this.canvas.height,e=this.canvas.width/2,this.spectating){function r(t){parseInt(t%1e3/100);var e=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60),i=Math.floor(t/36e5%24);return("00"==i?"":i+"h ")+("00"==s?"":s+"m ")+e+"s"}this.deathRect.destroy(),this.deathRect=this.add.rectangle(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2,this.canvas.height/1.5,9498256),this.deadText.destroy(),this.deadText=this.add.text(this.canvas.width/2,this.deathRect.y-this.deathRect.height/2,"You got stabbed",{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.deadText.setFontSize(Math.min(this.canvas.width/25,this.canvas.height/20)),this.deadText.y+=this.deadText.height;var s=["Nooooooooo","Rest in peace","You can do better!","Practice makes perfect!","Keep trying!"],n=s[Math.floor(Math.random()*s.length)];this.dataText.destroy(),this.dataText=this.add.text(this.canvas.width/2,this.deadText.y,n,{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.dataText.setFontSize(Math.min(this.canvas.width/40,this.canvas.height/30)),this.dataText.y+=1.5*this.dataText.height,this.statsText.destroy(),this.statsText=this.add.text(this.canvas.width/2,this.dataText.y,"Stabbed By: "+this.dtas.killedBy+"\nCoins: "+this.myObj.coins+"\nKills: "+this.myObj.kills+"\nSurvived: "+r(this.dtas.timeSurvived),{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.statsText.setFontSize(Math.min(this.canvas.width/35,this.canvas.height/25)),this.statsText.y+=this.statsText.height,this.playAgain.destroy(),this.playAgain=new t(this,0,0,"playAgainBtn",(()=>{this.callback(),this.socket.disconnect(),this.scene.start("title")})),this.playAgain.btn.setScale(Math.min(this.canvas.width/6533.33333333,this.canvas.height/5532.33333333)),this.playAgain.btn.y=this.statsText.y+this.statsText.displayHeight,this.playAgain.btn.x=this.canvas.width/2,this.playAgain.btn.x-=this.playAgain.btn.displayWidth/2}if(this.spectating)return;this.lvlBar.x=e/2,this.lvlBar.width=this.canvas.width-e,this.lvlBar.height=this.canvas.height/30,this.lvlBar.y=this.canvas.height-this.lvlBar.height-this.canvas.height/40,this.lvlBar.draw(),this.lvlState.x=this.canvas.width/2,this.lvlState.setFontSize(i(1366,50,this.canvas.width)),this.lvlState.y=this.lvlBar.y-this.lvlState.height/2,this.playerCount.x=this.miniGraphics.x+2*this.miniMap.scaleFactor,this.playerCount.y=this.canvas.height-2*this.miniMap.scaleFactor-17,this.lvlText.setFontSize(i(1366,75,this.canvas.width))}catch(a){console.log(a)}};var c;window.addEventListener("resize",(function(){clearTimeout(c),c=setTimeout(o,100)}));var h="us1"==this.options.server?"https://us2.swordbattle.io":"us2"==this.options.server?"https://sword-io-game.herokuapp.com":"https://swordbattle.herokuapp.com";this.socket=io(h,{closeOnBeforeunload:!1,transports:["websocket"]});var l=!1;function u(t){l||(console.log(t),document.write('<b>Failed to contact the server, try a different server from settings (bottom left)</b><br><br><button onclick="location.reload()"><h1>Refresh</h1></button>'),l=!0)}this.socket.on("connect_error",u),this.socket.on("connect_failed",u),this.secret?this.socket.emit("go",this.secret,e,!0,this.options):this.socket.emit("go",this.name,e,!1,this.options);const d=t=>{this.mobile&&this.joyStick&&this.joyStick.pointer&&this.joyStick.pointer.id==t.id||this.mouseDown||(t&&(this.gamePoint={x:t.x,y:t.y}),this.mouseDown=!0,this.socket.emit("mouseDown",!0))},y=t=>{this.mobile&&this.joyStick&&this.joyStick.pointer&&this.joyStick.pointer.id==t.id||this.mouseDown&&(t&&(this.gamePoint={x:t.x,y:t.y}),this.mouseDown=!1,this.socket.emit("mouseDown",!1))};this.input.keyboard.on("keydown-SPACE",(()=>{this.chat.toggled||d()}),this),this.input.keyboard.on("keyup-SPACE",(()=>{y()}),this),this.input.on("pointerdown",(function(t){d(t)}),this),this.input.on("pointerup",(function(t){y(t)}),this),this.mobile&&(this.gamePoint={x:0,y:0},this.input.on("pointermove",(t=>{this.joyStick.pointer&&this.joyStick.pointer.id==t.id||(this.gamePoint={x:t.x,y:t.y})}))),this.socket.on("tps",(t=>{this.tps=t;var e=Date.now();this.socket.emit("ping",(()=>{this.ping=Date.now()-e}))})),this.socket.on("ban",(t=>{l=!0,document.write(t)})),this.graphics=this.add.graphics().setDepth(4);this.graphics.lineStyle(5e3,25600,1),this.graphics.strokeRoundedRect(-12500,-12500,25e3,25e3,0),this.graphics.lineStyle(10,16776960,1),this.graphics.strokeRoundedRect(-1e4,-1e4,2e4,2e4,0),this.socket.on("levels",(t=>this.levels=t));const p=t=>{if(!(this.enemies.filter((e=>e.id===t.id)).length>0)){var e={id:t.id,down:!1,playerObj:void 0,lastTick:Date.now(),sword:this.add.image(t.pos.x,t.pos.y,t.skin+"Sword").setScale(.25).setDepth(49),player:this.add.image(t.pos.x,t.pos.y,t.skin+"Player").setScale(.25).setDepth(49),bar:new a(this,t.pos.x,t.pos.y+55),nameTag:this.add.rexBBCodeText(t.pos.x,t.pos.y-90,`${t.name}`,{fontFamily:"serif",fill:t.verified?"mitblade"==t.name.toLowerCase()||"codergautam"==t.name.toLowerCase()?"#FF0000":"#0000FF":"#000000",fontSize:"25px"}).setDepth(69).setAlpha(t.verified?1:.5),swordAnim:{go:!1,added:0},toAngle:0,chatText:this.add.text(0,0,"",{fontFamily:"Georgia"}).setDepth(71).setOrigin(.5),chatTween:void 0},s=100/(100*t.scale)*1.5;e.sword.angle=180*Math.atan2(t.mousePos.y-t.mousePos.viewport.height/2,t.mousePos.x-t.mousePos.viewport.width/2)/Math.PI+45,e.sword.x=e.player.x+e.player.width/s*Math.cos(e.sword.angle*Math.PI/180),e.sword.y=e.player.y+e.player.width/s*Math.sin(e.sword.angle*Math.PI/180),e.bar.bar.setDepth(69),this.UICam.ignore([e.player,e.bar.bar,e.sword,e.nameTag,e.chatText,this.graphics]),this.enemies.push(e);var i=this.add.circle(0,0,10,16711680);this.cameras.main.ignore(i),i.setDepth(98),this.miniMap.people.push({id:t.id,circle:i}),Date.now()-t.joinTime<5e3&&(e.player.setAlpha(.5),e.sword.setAlpha(.5),e.bar.bar.setAlpha(.5),setTimeout((()=>{this.tweens.add({targets:[e.player,e.sword,e.bar.bar],alpha:1,duration:100,ease:"Linear",repeat:0,yoyo:!1})}),5e3-(Date.now()-t.joinTime)))}};this.removePlayer=t=>{try{var e=this.enemies.find((e=>e.id==t));this.tweens.add({targets:[e.player,e.nameTag,e.bar.bar,e.sword],alpha:0,duration:150,ease:"Sine2",onComplete:()=>{e.player.destroy(),this.enemies.splice(this.enemies.findIndex((e=>e.id==t)),1),e.bar.destroy(),e.nameTag.destroy(),e.sword.destroy(),this.spectating||(this.miniMap.people.find((e=>e.id===t)).circle.destroy(),this.miniMap.people=this.miniMap.people.filter((e=>e.id!=t)))}})}catch(t){console.log(t)}},this.socket.on("players",(t=>{t.forEach((t=>p(t))),this.ready=!0,this.ready||(this.ready=!0)})),this.socket.on("new",(t=>{p(t),this.ready||(this.ready=!0)})),this.socket.on("me",(t=>{if(this.loadrect.visible&&this.loadrect.destroy(),this.loadtext.visible&&this.loadtext.destroy(),this.levels.length>0)if(t.level>=this.levels.length-1)this.lvlState.setText("Max Level"),this.lvlBar.setLerpValue(100);else{var e=this.levels[t.level-1].coins-this.levels[t.level-1].start,s=t.coins-this.levels[t.level-1].start;this.lvlBar.setLerpValue(s/e*100),this.lvlState.setText("Level: "+t.level+" ("+Math.round(s/e*100)+"%)"),this.myObj&&t.level>this.myObj.level&&(this.lvlTextTween&&this.lvlTextTween.stop(),this.lvlText.data||this.lvlText.setData("x",0),this.lvlText.setData("x",this.lvlText.getData("x")+(t.level-this.myObj.level)),this.lvlText.setText("Level up!"+(this.lvlText.getData("x")>1?` x${this.lvlText.getData("x")}`:"")),this.lvlTextTween=this.tweens.add({targets:this.lvlText,alpha:1,y:this.canvas.height/4,completeDelay:1e3,duration:500,onComplete:()=>{this.lvlTextTween=this.tweens.add({targets:this.lvlText,alpha:0,y:this.canvas.height/5,onComplete:()=>this.lvlText.setData("x",0),duration:300,ease:"Power2"},this)},ease:"Power2"},this))}this.spectating||this.mePlayer.texture.key+"Player"==t.skin||(this.mePlayer.setTexture(t.skin+"Player"),this.meSword.setTexture(t.skin+"Sword")),this.myObj?this.tweens.add({targets:this.mePlayer,x:t.pos.x,y:t.pos.y,duration:300,ease:"Power2"}):(this.mePlayer.x=t.pos.x,this.mePlayer.y=t.pos.y),this.mePlayer.setScale(t.scale),this.meBar.maxValue=t.maxHealth,this.meBar.setHealth(t.health);var n=1e3;n+=this.mePlayer.width*this.mePlayer.scale*5;var r=Math.max(this.scale.width/n,this.scale.height/n);if(this.cameras.main.setZoom(r),this.meSword.setScale(t.scale),this.background.setTileScale(this.cameras.main.zoom,this.cameras.main.zoom),this.background.displayWidth=this.cameras.main.displayWidth,this.background.displayHeight=this.cameras.main.displayHeight,this.killCount.setText("[img=kill] "+t.kills+"\n[img=coin] "+t.coins),this.myObj=t,!this.miniMap.people.find((e=>e.id===t.id))){var a=this.add.circle(0,0,10,16777215);this.cameras.main.ignore(a),a.setDepth(99),this.miniMap.people.push({id:t.id,circle:a})}if(!this.spectating){var o=this.miniMap.people.find((e=>e.id===t.id));o.circle.x=this.miniGraphics.x+t.pos.x/1e4*this.miniMap.scaleFactor+this.miniMap.scaleFactor,o.circle.y=this.miniGraphics.y+t.pos.y/1e4*this.miniMap.scaleFactor+this.miniMap.scaleFactor,o.circle.radius=t.scale*(i(1280,15,this.canvas.width)/2)}this.bushes.filter((t=>function(t,e,s,i,n,r){var a,o;return a=t-i,o=e-n,s+r>Math.sqrt(a*a+o*o)&&s>r/2}(t.x,t.y,t.displayWidth/2,this.mePlayer.x,this.mePlayer.y,this.mePlayer.displayWidth/2))).length>0?this.meBar.bar.setAlpha(.3):1!=this.meBar.bar.alpha&&this.meBar.bar.setAlpha(1)})),this.socket.on("player",(t=>{if(this.ready)try{var e=this.enemies.find((e=>e.id==t.id));if(!e)return;e.lastTick=Date.now(),e.playerObj=t,e.bar.maxValue=t.maxHealth,e.bar.setHealth(t.health),this.tweens.add({targets:e.player,x:t.pos.x,y:t.pos.y,duration:300,ease:"Power2"});var s=t.mousePos;if(e.toAngle=180*Math.atan2(s.y-s.viewport.height/2,s.x-s.viewport.width/2)/Math.PI+45,e.player.setScale(t.scale),e.sword.setScale(t.scale),e.down=t.mouseDown,this.spectating)return;var n=this.miniMap.people.find((e=>e.id===t.id));n.circle.x=this.miniGraphics.x+t.pos.x/1e4*this.miniMap.scaleFactor+this.miniMap.scaleFactor,n.circle.y=this.miniGraphics.y+t.pos.y/1e4*this.miniMap.scaleFactor+this.miniMap.scaleFactor,n.circle.radius=t.scale*(i(1280,15,this.canvas.width)/2)}catch(t){console.log(t)}})),this.socket.on("chat",(t=>{if(this.myObj)if(t.id==this.myObj.id)this.meChat.setText(t.msg),this.meChat.setAlpha(0),this.meChatTween&&this.meChatTween.stop(),this.meChatTween=this.tweens.add({targets:this.meChat,duration:200,alpha:1,completeDelay:2e3,onComplete:()=>{this.meChatTween=this.tweens.add({targets:this.meChat,duration:200,alpha:0,onComplete:()=>{this.meChat.setText("")}})},ease:"Power2"});else{var e=this.enemies.find((e=>e.id==t.id));if(!e)return;e.chatText.setText(t.msg),e.chatText.setAlpha(0),e.chatTween&&e.chatTween.stop(),e.chatTween=this.tweens.add({targets:e.chatText,duration:200,alpha:1,completeDelay:2e3,onComplete:()=>{e.chatTween=this.tweens.add({targets:e.chatText,duration:200,alpha:0,onComplete:()=>{e.chatText.setText("")}})}})}})),this.socket.on("playerLeave",this.removePlayer),this.socket.on("playerDied",((t,e)=>{if(this.myObj&&this.myObj.id===e.killedBy.id){var s=this.enemies.find((e=>e.id==t));if(s&&s.playerObj){var n=i(1366,64,this.canvas.width);if(Date.now()-this.lastKill<2500){this.streak++;var r="[b]",a=["Double","Triple","Quadra","Quinta","Hexta","Hepta","Octa","Nona","Deca"];this.streak-1>a.length?r+=`x${this.streak}`:r+=a[this.streak-1],r+=" Kill![/b]",this.killtxts.forEach((t=>{t.destroy()})),this.killtxts=[]}else this.streak=0,r=`[b][color=#e82a1f]Stabbed [/color][color=#0000FF]${s.playerObj.name}[/color][/b]`;var o=this.add.rexBBCodeText(this.canvas.width/2,this.canvas.height,r).setOrigin(.5).setAlpha(0).setFontSize(n);o.setData("index",this.killtxts.length),this.killtxts.push(o);const t=t=>{this.tweens.add({targets:t,alpha:0,y:this.canvas.height,onComplete:()=>{this.killtxts.slice(t.getData("index"),1),t.destroy()},ease:"Power2",duration:250})};this.tweens.add({targets:o,alpha:1,y:this.canvas.height-this.canvas.height/6,completeDelay:250,duration:750,onComplete:()=>t(o),ease:"Bounce"},this),this.cameras.main.ignore(o)}this.lastKill=Date.now()}this.removePlayer(t)})),this.socket.on("dealHit",((t,e)=>{var s=this.enemies.find((e=>e.id==t));if(s){var i=this.add.particles("hitParticle"),n=i.createEmitter({maxParticles:5,scale:.01});n.setPosition(e?e.x:s.player.x,e?e.y:s.player.y),this.UICam.ignore(i),n.setSpeed(200),i.setDepth(105),n.setBlendMode(Phaser.BlendModes.ADD)}this.hit.play()})),this.socket.on("takeHit",((t,e)=>{this.damage.play();var s=this.add.particles("hitParticle"),i=s.createEmitter({maxParticles:5,scale:.01});i.setPosition(this.mePlayer.x,this.mePlayer.y),this.UICam.ignore(s),i.setSpeed(200),s.setDepth(105)}));const f=(t,e)=>{if(!this.dead){var s=!0;e||(e=[t.pos.x,t.pos.y],s=!1),this.coins.push({id:t.id,item:this.add.image(e[0],e[1],"coin").setScale(t.size/100).setDepth(20).setAlpha(s?0:1),state:{collected:!1,collectedBy:void 0,time:0}}),s&&this.tweens.add({targets:this.coins[this.coins.length-1].item,alpha:1,x:t.pos.x,y:t.pos.y,duration:250,ease:"Sine2"}),this.UICam.ignore(this.coins[this.coins.length-1].item)}},m=(t,e)=>{if(!this.dead){var s=!0;e||(e=[t.pos.x,t.pos.y],s=!1),this.chests.push({id:t.id,item:this.add.image(e[0],e[1],"chest").setScale(t.scale).setDepth(21).setAlpha(s?0:1).setOrigin(0)}),s&&this.tweens.add({targets:this.chests[this.chests.length-1].item,alpha:1,x:t.pos.x,y:t.pos.y,duration:250,ease:"Sine2"}),this.UICam.ignore(this.chests[this.chests.length-1].item)}};this.socket.on("coins",(t=>{t.forEach((t=>{0==this.coins.filter((e=>e.id==t.id)).length&&f(t)})),this.coins.filter((e=>0==t.filter((t=>e.id==t.id&&!e.state.collected)).length)).forEach((t=>{t.item.destroy()})),this.coins=this.coins.filter((e=>1==t.filter((t=>e.id==t.id&&!e.state.collected)).length))})),this.socket.on("coin",((t,e)=>{Array.isArray(t)?e?t.forEach((t=>{f(t,e)})):t.forEach((t=>{f(t)})):f(t)})),this.socket.on("chests",(t=>{t.forEach((t=>{0==this.chests.filter((e=>e.id==t.id)).length&&m(t)})),this.chests.filter((e=>0==t.filter((t=>e.id==t.id)).length)).forEach((t=>{t.item.destroy()})),this.chests=this.chests.filter((e=>1==t.filter((t=>e.id==t.id)).length))})),this.socket.on("chest",((t,e)=>{Array.isArray(t)?e?t.forEach((t=>{m(t,e)})):t.forEach((t=>{m(t)})):m(t)})),this.socket.on("youDied",(e=>{this.dtas={killedBy:e.killedBy,timeSurvived:e.timeSurvived},this.spectating=!0,this.mePlayer.destroy(),this.meBar.destroy(),this.meSword.destroy(),this.lvlBar.destroy(),this.lvlState.destroy(),this.killCount.destroy(),this.leaderboard.destroy(),this.miniGraphics.destroy(),this.playerCount.destroy(),this.chat.obj&&this.chat.obj.destroy(),this.mobile&&(this.joyStick.destroy(),this.chat.btn.destroy()),this.miniMap.people.forEach((t=>{t.circle.destroy()})),this.miniMap.people=[],this.time.delayedCall(1500,(()=>{this.deathRect=this.add.rectangle(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2,this.canvas.height/1.5,9498256).setAlpha(0),this.cameras.main.ignore(this.deathRect),this.tweens.add({targets:this.deathRect,alpha:1,duration:250,ease:"Sine2",onComplete:()=>{window.onbeforeunload=()=>{},this.deadText=this.add.text(this.canvas.width/2,this.deathRect.y-this.deathRect.height/2,"You got stabbed",{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.cameras.main.ignore(this.deadText),this.deadText.setFontSize(Math.min(this.canvas.width/25,this.canvas.height/20)),this.deadText.y+=this.deadText.height;var s=["Nooooooooo","Rest in peace","You can do better!","Practice makes perfect!","Keep trying!"],i=s[Math.floor(Math.random()*s.length)];this.dataText=this.add.text(this.canvas.width/2,this.deadText.y,i,{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.dataText.setFontSize(Math.min(this.canvas.width/40,this.canvas.height/30)),this.dataText.y+=1.5*this.dataText.height,this.cameras.main.ignore(this.dataText),this.statsText=this.add.text(this.canvas.width/2,this.dataText.y,"Stabbed By: "+e.killedBy+"\nCoins: 0\nKills: 0\nSurvived: 0s",{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5),this.statsText.setFontSize(Math.min(this.canvas.width/35,this.canvas.height/25)),this.statsText.y+=this.statsText.height,this.cameras.main.ignore(this.statsText),this.playAgain=new t(this,0,0,"playAgainBtn",(()=>{this.callback(),this.socket.disconnect(),this.scene.start("title")})),this.playAgain.btn.setScale(Math.min(this.canvas.width/6533.33333333,this.canvas.height/5532.33333333)),this.cameras.main.ignore(this.playAgain.btn),this.playAgain.btn.y=this.statsText.y+this.statsText.displayHeight,this.playAgain.btn.x=this.canvas.width/2,this.playAgain.btn.x-=this.playAgain.btn.displayWidth/2,this.tweens.addCounter({from:0,to:100,duration:1e3,onUpdate:t=>{var s=Math.round(this.myObj.coins*(t.getValue()/100)),i=Math.round(this.myObj.kills*(t.getValue()/100)),n=Math.round(e.timeSurvived*(t.getValue()/100));this.statsText.setText("Stabbed By: "+e.killedBy+"\nCoins: "+s+"\nKills: "+i+"\nSurvived: "+function(t){parseInt(t%1e3/100);var e=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60),i=Math.floor(t/36e5%24);return("00"==i?"":i+"h ")+("00"==s?"":s+"m ")+e+"s"}(n))}})}})}))})),this.socket.on("youWon",(t=>{this.win(t)})),this.socket.on("collected",((t,e,s)=>{this.myObj&&this.myObj.id==e&&(s?this.coin:this.chestOpen).play(),this.coins.find((e=>e.id==t))?this.coins.find((e=>e.id==t)).state={collected:!0,collectedBy:e,time:0}:this.chests.find((e=>e.id==t))&&this.tweens.add({targets:this.chests.find((e=>e.id==t)).item,alpha:0,duration:500,ease:"Sine2",onComplete:t=>{t.targets[0].destroy()}})})),this.playerCount.x=this.miniGraphics.x+2*this.miniMap.scaleFactor,this.playerCount.y=this.canvas.height-2*this.miniMap.scaleFactor-17,setTimeout((()=>{this.tweens.add({targets:[this.mePlayer,this.meSword,this.meBar.bar],alpha:1,duration:100,ease:"Linear",repeat:0,yoyo:!1})}),5e3)}))}))}update(t,e){if(this.readyt){try{this.lvlBar.update()}catch(t){console.log("Failed to update level bar"),console.log(t)}var s={left:!1,up:!1,right:!1,down:!1},i=this.input.keyboard.addKey("W",!1),n=this.input.keyboard.addKey("A",!1),r=this.input.keyboard.addKey("S",!1),a=this.input.keyboard.addKey("D",!1);try{this.key=this.mobile&&this.joyStick?this.joyStick.createCursorKeys():this.cursors,(this.key.up.isDown||i.isDown)&&(s.up=!0),(this.key.down.isDown||r.isDown)&&(s.down=!0),(this.key.right.isDown||a.isDown)&&(s.right=!0),(this.key.left.isDown||n.isDown)&&(s.left=!0),this.socket.emit("move",s)}catch(t){console.log(t)}if(this.meSword)var o=this.meSword.angle;if(this.mobile)c=this.gamePoint;else var c=this.input;this.meSword.angle=180*Math.atan2(c.y-this.canvas.height/2,c.x-this.canvas.width/2)/Math.PI+45,this.mePlayer.angle=this.meSword.angle+45+180;var h=this.myObj?this.myObj.damageCooldown:120;this.mouseDown&&!this.swordAnim.go&&0==this.swordAnim.added?(this.swordAnim.go=!0,this.tweens.addCounter({from:0,to:50,duration:h/2,onUpdate:t=>{this.swordAnim.added=t.getValue()},onComplete:()=>{this.swordAnim.go=!1}})):!this.swordAnim.go&&!this.mouseDown&&this.swordAnim.added>0&&(this.swordAnim.go=!0,this.tweens.addCounter({from:50,to:0,duration:h/2,onUpdate:t=>{this.swordAnim.added=t.getValue()},onComplete:()=>{this.swordAnim.go=!1}})),this.meSword.angle-=this.swordAnim.added;var l={viewport:{width:this.canvas.width,height:this.canvas.height},x:c.x,y:c.y};this.socket&&o&&this.meSword.angle!=o&&this.socket.emit("mousePos",l);var u=this.sys.game.loop.actualFps;this.enemies.forEach((t=>{if(Date.now()-t.lastTick>1e4)return this.removePlayer(t);if(t.playerObj)var s=t.playerObj.scale;else s=.25;t.bar.width=t.player.height*s/.9375,t.bar.height=t.player.height*s*.15,t.bar.x=t.player.x-t.bar.width/2,t.bar.y=t.player.y-t.player.height*s/1.2,t.bar.draw();try{t.nameTag.setFontSize(100*s),t.nameTag.x=t.player.x-t.nameTag.width/2,t.nameTag.y=t.player.y-t.player.height*s-t.nameTag.height}catch(t){console.log(t)}try{t.playerObj&&t.chatText.setFontSize(100*t.playerObj.scale),t.chatText.x=t.player.x,t.chatText.y=t.nameTag.y-t.bar.height}catch(t){console.log(t)}if(t.playerObj)var i=100/(100*t.playerObj.scale)*1.5;else i=6;if(t.sword.angle=function(t,e,s){const i=function(t,e){return s=t-Math.floor(t/e)*e,i=e,Math.min(Math.max(s,0),i);var s,i}(e-t,360);return b(t,t+(i>180?i-360:i),.5)}(t.sword.angle,t.toAngle),t.player.angle=t.sword.angle+45+180,t.down?(t.swordAnim.added||(t.swordAnim.added=0),t.swordAnim.added<=0&&(t.swordAnim.go=!0)):t.swordAnim.added>=50&&(t.swordAnim.go=!1),t.swordAnim.go&&t.swordAnim.added<50){var n=50/t.playerObj.damageCooldown*e;t.swordAnim.added<50&&(t.swordAnim.added+=n)}!t.swordAnim.go&&t.swordAnim.added>0&&(t.swordAnim.added-=10),t.sword.angle-=t.swordAnim.added,t.sword.x=t.player.x+t.player.width/i*Math.cos(t.sword.angle*Math.PI/180),t.sword.y=t.player.y+t.player.width/i*Math.sin(t.sword.angle*Math.PI/180)}));var d=this.myObj;d||(d={scale:.25});try{if(this.meBar.width=this.mePlayer.height*d.scale/.9375,this.meBar.height=this.mePlayer.height*d.scale*.2,this.meBar.x=this.mePlayer.x-this.meBar.width/2,this.meBar.y=this.mePlayer.y-this.mePlayer.height*d.scale/1.2,this.myObj&&this.meChat.setFontSize(100*this.myObj.scale),this.meChat.x=this.mePlayer.x,this.meChat.y=this.meBar.y-this.meBar.height,this.meBar.draw(),this.myObj)var y=100/(100*this.myObj.scale)*1.5;else y=6;this.meSword.x=this.mePlayer.x+this.mePlayer.width/y*Math.cos(this.meSword.angle*Math.PI/180),this.meSword.y=this.mePlayer.y+this.mePlayer.width/y*Math.sin(this.meSword.angle*Math.PI/180)}catch(t){console.log(t)}if(this.myObj){var p=this.enemies.filter((t=>t.hasOwnProperty("playerObj")&&t.playerObj));p.push({playerObj:this.myObj});try{var f=p.sort(((t,e)=>t.playerObj.coins-e.playerObj.coins)).reverse(),m="",g=!1,x=this.mobile||this.canvas.height<550?5:10;if(f.slice(0,x).forEach(((t,e)=>{if(t.playerObj){if(!t.playerObj.hasOwnProperty("coins"))return console.log(t.playerObj);t.playerObj.id==this.myObj.id&&(g=!0);var s=t.playerObj;m+=`#${e+1}: ${s.verified?"mitblade"==s.name.toLowerCase()||"codergautam"==s.name.toLowerCase()?"[color=#FF0000]":"[color=#0000FF]":""}${s.name}${s.verified?"[/color]":""}- ${k(s.coins)}\n`}})),!g){var v=f.findIndex((t=>t.playerObj.id==this.myObj.id));m+=`...\n#${v+1}: ${this.myObj.verified?"mitblade"==this.myObj.name.toLowerCase()||"codergautam"==this.myObj.name.toLowerCase()?"[color=#FF0000]":"[color=#0000FF]":""}${this.myObj.name}${this.myObj.verified?"[/color]":""}- ${k(this.myObj.coins)}\n`}this.spectating||(this.leaderboard.setText(m),this.leaderboard.x=this.canvas.width-this.leaderboard.width-15)}catch(t){console.log(t)}try{this.spectating||this.playerCount.setText("Players: "+(Object.keys(this.enemies).length+1).toString()+(this.canvas.height<550?"":"\nFPS: "+Math.round(this.sys.game.loop.actualFps)+"\nTPS: "+this.tps+"\nPing: "+this.ping+" ms"))}catch(t){console.log(t)}if(this.myObj){this.coins.forEach((t=>{if(t.state.collected){if(t.state.collectedBy==this.myObj.id)var e=this.mePlayer.x,s=this.mePlayer.y;else try{var i=this.enemies.find((e=>e.id==t.state.collectedBy));if(!i)return t.item.destroy(),void(this.coins=this.coins.filter((e=>e.id!=t.id)));e=i.player.x,s=i.player.y}catch(t){return void console.log(t)}t.item.x=b(t.item.x,e,(6-(Math.log2(u)-Math.log2(1.875)))/10*2),t.item.y=b(t.item.y,s,(6-(Math.log2(u)-Math.log2(1.875)))/10),t.state.time+=1,n=t.item.x,r=t.item.y,a=e,o=s,(Math.hypot(a-n,o-r)<this.mePlayer.width*this.mePlayer.scale/3||t.state.time>7)&&(t.item.destroy(),this.coins=this.coins.filter((e=>e.id!=t.id)))}var n,r,a,o}));var w=this.mePlayer;this.background.setTilePosition(this.cameras.main.scrollX*this.cameras.main.zoom+(w.x-this.cameras.main.scrollX*this.cameras.main.zoom-this.canvas.width/2),this.cameras.main.scrollY*this.cameras.main.zoom+(w.y-this.cameras.main.scrollY*this.cameras.main.zoom-this.canvas.height/2)),this.background.x=w.x-this.cameras.main.displayWidth/2,this.background.y=w.y-this.cameras.main.displayHeight/2,!this.ready||this.dead||this.socket.connected||(document.write('<h1>You got disconnected</h1><br><button onclick="location.reload()"><h1>Refresh</h1></button>'),this.dead=!0)}}}function b(t,e,s){return(1-s)*t+s*e}function k(t){return t>999?parseFloat((t/1e3).toFixed(t<1e4?2:1))+"k":t}}}const un=ln;class dn extends Phaser.Scene{constructor(t){super(),this.callback=t}preload(){this.e=!0,this.background=this.add.rectangle(0,0,document.documentElement.clientWidth,document.documentElement.clientHeight,34816).setOrigin(0).setScrollFactor(0,0).setScale(2),this.loadText=this.add.text(0,0,"Loading").setOrigin(.5,.5),this.loadText.setFontSize(this.canvas.width/20),this.loadText.x=this.canvas.width/2,this.loadText.y=this.canvas.height/2,this.load.plugin("rexvirtualjoystickplugin","/joystick.js",!0),this.load.plugin("rexbbcodetextplugin","/textplus.js",!0),this.load.image("playerPlayer","/assets/images/player.png"),this.load.image("playerSword","/assets/images/sword.png"),this.load.image("codergautamytPlayer","/assets/images/codergautamytPlayer.png"),this.load.image("codergautamytSword","/assets/images/codergautamytSword.png"),this.load.image("devilPlayer","/assets/images/devilPlayer.png"),this.load.image("devilSword","/assets/images/devilSword.png"),this.load.image("winterPlayer","/assets/images/winterPlayer.png"),this.load.image("winterSword","/assets/images/winterSword.png"),this.load.image("chefPlayer","/assets/images/chefPlayer.png"),this.load.image("chefSword","/assets/images/chefSword.png"),this.load.image("medicPlayer","/assets/images/medicPlayer.png"),this.load.image("medicSword","/assets/images/medicSword.png"),this.load.image("foxPlayer","/assets/images/foxPlayer.png"),this.load.image("foxSword","/assets/images/devilSword.png"),this.load.image("springPlayer","/assets/images/springPlayer.png"),this.load.image("springSword","/assets/images/springSword.png"),this.load.image("scythePlayer","/assets/images/scythePlayer.png"),this.load.image("scytheSword","/assets/images/scytheSword.png"),this.load.image("angelPlayer","/assets/images/angelPlayer.png"),this.load.image("angelSword","/assets/images/sword.png"),this.load.image("neonPlayer","/assets/images/neonPlayer.png"),this.load.image("neonSword","/assets/images/neonSword.png"),this.load.image("background","/assets/images/background.jpeg"),this.load.image("coin","/assets/images/coin.png"),this.load.image("chest","/assets/images/chest.png"),this.load.image("kill","/assets/images/kill.png"),this.load.image("hitParticle","/assets/images/hitparticle.png"),this.load.image("bush","/assets/images/bush.png"),this.load.image("chatbtn","/assets/images/chat.png"),this.load.image("loginbtn","/assets/images/login.png"),this.load.image("signupbtn","/assets/images/signup.png"),this.load.image("playAgainBtn","/assets/images/playAgain.png"),this.load.image("settingsBtn","/assets/images/settingsBtn.png"),this.load.image("shopBtn","/assets/images/shop.png"),this.load.audio("coin","/assets/sound/coin.m4a"),this.load.audio("damage","/assets/sound/damage.mp3"),this.load.audio("hit","/assets/sound/hitenemy.wav"),this.load.audio("winSound","/assets/sound/win.m4a"),this.load.audio("loseSound","/assets/sound/lost.mp3"),this.load.audio("chestOpen","/assets/sound/chest.wav"),this.load.image("opening","/assets/images/opening.png"),this.load.html("title","/title.html"),this.load.html("promo","/promo.html"),this.load.html("login","/login.html"),this.load.html("shop","/shop"),this.load.html("signup","/signup.html"),this.load.html("dropdown","/dropdown.html"),this.load.html("footer","/footer.html"),this.load.html("settings","/settings.html"),this.load.html("chat","/chatbox.html"),this.load.audio("openingsound","/assets/sound/opening.mp3"),this.scale.fullscreenTarget=document.getElementById("game")}create(){this.scene.stop(),this.scene.start("title")}update(){}}const yn=dn;function pn(){navigator.onLine?document.write("<h1>You're back online! Refresh to play!</h1>"):document.write('<h1>You got disconnected</h1><br><button onclick="location.reload()"><h1>Refresh</h1></button>');try{screen.orientation.lock("landscape")}catch(t){console.log("failed to lock orientation",t)}}"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js"),window.addEventListener("online",pn),window.addEventListener("offline",pn),window.addEventListener("load",(()=>{navigator.onLine||pn();var t={type:Phaser.CANVAS,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,parent:"game",dom:{createContainer:!0,autoCenter:Phaser.Scale.CENTER_BOTH},scale:{mode:Phaser.Scale.RESIZE}},e=window.matchMedia("(pointer: coarse)").matches,s=new Phaser.Game(t),i=new yn,n=function(t){try{var e=window.localStorage,s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return!1}}();if(n&&null===window.localStorage.getItem("lastAd")){window.localStorage.setItem("lastAd",Date.now());var a=Date.now()}else if(n)a=Number(window.localStorage.getItem("lastAd"));else a=Date.now();document.body.style.webkitTransform=document.body.style.msTransform=document.body.style.transform="scale(1)";var o=3e5,c=new un((t=>{h.playPreroll=Date.now()-a>o})),h=new r(Date.now()-a>o,((t,e,s)=>{c.name=t,c.options=h.options,"auto"==c.options.server&&(c.options.server=h.optimalServer),c.openingBgm=e,c.secret=s,h.scene.start("game"),h.showPromo=!1,Date.now()-a>o&&(n?(window.localStorage.setItem("lastAd",Date.now()),a=Date.now()):a=Date.now())}));function l(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}h.mobile=e,c.mobile=e,e||(h.showPromo=!0),Object.defineProperty(h,"canvas",{get:l}),Object.defineProperty(c,"canvas",{get:l}),Object.defineProperty(i,"canvas",{get:l}),s.scene.add("title",h),s.scene.add("game",c),s.scene.add("open",i),s.scene.start("open"),document.addEventListener("contextmenu",(function(t){t.preventDefault()}))}))})()})();
//# sourceMappingURL=main.js.map